{
  "project": "Hockey Rink Website MVP",
  "timeline": {
    "start": "2025-08-22",
    "end": "2025-10-20",
    "daily_hours": "1‚Äì2"
  },
  "tech_stack": {
    "backend": ".NET Core 9, ASP.NET Core, Azure SQL (Free Tier)",
    "frontend": "Angular 20, Bootstrap 5.3.3",
    "devops": "GitHub Actions, Azure Static Web Apps"
  },
  "features": [
    "User registration and login",
    "League and session browsing",
    "Session registration and payment simulation",
    "Team drafts and admin dashboard",
    "User profile management",
    "Notifications and error handling"
  ],
  "week_1": {
    "status": "Completed",
    "focus": "Backend setup",
    "deliverables": [
      "Models: Player, League, Session, Payment, etc.",
      "API endpoints: /api/auth/*, /api/users/profile, /api/sessions, /api/leagues",
      "xUnit tests passing",
      "Azure SQL configured and seeded"
    ]
  },
  "week_2": {
    "status": "Completed",
    "focus": "Frontend setup",
    "deliverables": [
      "Angular components: Login, Register, Leagues, Sessions, Profile",
      "Bootstrap styling",
      "Deployed to Azure Static Web Apps"
    ]
  },
  "week_3": {
    "status": "‚úÖ Completed - November 11, 2025",
    "focus": "Admin Features & Enhancements",
    "estimated_hours": "10 hours",
    "deliverables": [
      "‚úÖ Admin dashboard with statistics",
      "‚úÖ Admin sessions management (full CRUD)",
      "‚úÖ Admin users management",
      "‚úÖ Session filtering by league and date",
      "‚úÖ AuthGuard and AdminGuard implementation",
      "‚úÖ TypeScript interfaces (League, Session, etc.)",
      "‚úÖ Angular 20 control flow (@if, @for)",
      "‚úÖ Database migrations (LeagueId with FK constraints)",
      "‚úÖ Accessibility improvements (ARIA labels)",
      "‚úÖ Login redirects to dashboard",
      "‚úÖ Conditional navigation (auth-based)",
      "‚úÖ Admin sessions component with reactive forms and modals",
      "‚úÖ Code formatting and quality improvements"
    ],
    "deferred_to_week_4": [
      "UI polish with hockey-themed branding",
      "Frontend unit tests (comprehensive coverage)",
      "Error handling enhancements (toast notifications)"
    ]
  },
  "week_4": {
    "status": "‚úÖ Completed - November 2025",
    "focus": "Landing Page & UI Polish",
    "estimated_hours": "10 hours",
    "deliverables": [
      {
        "landing_page": {
          "status": "‚úÖ Complete",
          "hero_section": {
            "layout": "‚úÖ Full-width Bootstrap grid with animated ice pattern",
            "headline": "‚úÖ Hit the Ice. Join a League. Track Your Sessions.",
            "subtext": "‚úÖ Manage your hockey schedule, register for sessions, and connect with your team‚Äîall in one place.",
            "cta_buttons": "‚úÖ [Get Started, Browse Leagues]",
            "image": "‚úÖ Hockey-themed SVG ice pattern background with gradient"
          },
          "features_overview": {
            "status": "‚úÖ Complete with animated cards",
            "cards": [
              "‚úÖ Browse leagues and sessions",
              "‚úÖ Register and pay online",
              "‚úÖ Track your hockey stats"
            ]
          }
        }
      },
      {
        "ui_polish": {
          "status": "‚úÖ Complete",
          "colors": {
            "ice_blue": "‚úÖ #4FC3F7 (--ice-blue)",
            "puck_black": "‚úÖ #212529 (--puck-black)",
            "goal_red": "‚úÖ #DC3545 (--goal-red)"
          },
          "effects": "‚úÖ Hover transitions, smooth scrolling, SVG hockey icons, card animations",
          "responsive": "‚úÖ Mobile, tablet, desktop layouts verified",
          "session_cards": "‚úÖ Ice blue gradient backgrounds with border styling"
        }
      },
      {
        "navigation_enhancements": {
          "status": "‚úÖ Complete",
          "active_route_highlighting": "‚úÖ Bootstrap active class on current route",
          "smooth_transitions": "‚úÖ CSS transitions on all interactive elements"
        }
      },
      {
        "optional_addons": [
          "‚úÖ 404 page with hockey-themed design",
          "‚úÖ Final deployment verified on Azure",
          "‚úÖ Toast notifications system integrated"
        ]
      }
    ],
    "deployed_to_azure": "‚úÖ Successfully deployed and verified"
  },
  "week_5": {
    "status": "‚úÖ Completed - November 19, 2025",
    "focus": "Session Registration Enhancements & Admin League Management",
    "estimated_hours": "10 hours",
    "completed_items": [
      {
        "admin_league_management": {
          "status": "‚úÖ Complete - November 19, 2025",
          "description": "Full CRUD interface for managing league settings",
          "components": [
            "‚úÖ AdminLeagues component with reactive forms",
            "‚úÖ Edit league modal with validation",
            "‚úÖ Backend endpoints: GET /api/admin/leagues, PUT /api/admin/leagues/{id}",
            "‚úÖ Navigation link added to admin dashboard"
          ],
          "database_changes": [
            "‚úÖ Added StartDate, EarlyBirdPrice, EarlyBirdEndDate, RegularPrice to League model",
            "‚úÖ Added RegistrationOpenDate, RegistrationCloseDate to League model",
            "‚úÖ Migrations: AddLeagueRegistrationFields, AddLeaguePricingFields applied"
          ]
        }
      },
      {
        "session_enhancements": {
          "status": "‚úÖ Complete - November 19, 2025",
          "max_players_management": {
            "status": "‚úÖ Complete",
            "description": "Admin can set max players (1-250) for each session",
            "default": "20 players",
            "validation": "Min: 1, Max: 250"
          },
          "registration_windows": {
            "status": "‚úÖ Complete",
            "fields": [
              "‚úÖ RegistrationOpenDate (datetime-local input)",
              "‚úÖ RegistrationCloseDate (datetime-local input)"
            ],
            "auto_status_management": "‚úÖ Sessions auto-activate when registration opens, auto-deactivate when closed or session ends"
          },
          "pricing_tiers": {
            "status": "‚úÖ Complete",
            "fields": [
              "‚úÖ EarlyBirdPrice (optional)",
              "‚úÖ EarlyBirdEndDate (datetime-local)",
              "‚úÖ RegularPrice (replaces Fee field)"
            ],
            "display_logic": "‚úÖ Shows early bird price before end date, switches to regular price after"
          },
          "inactive_session_handling": {
            "status": "‚úÖ Complete",
            "description": "‚úÖ Register button hidden for inactive sessions",
            "admin_control": "‚úÖ Admin can manually toggle IsActive status"
          }
        }
      },
      {
        "leagues_page_enhancements": {
          "status": "‚úÖ Complete - November 19, 2025",
          "start_date_display": {
            "status": "‚úÖ Fixed",
            "format": "Month Day, Year (e.g., November 15, 2025)",
            "fallback": "Legacy expectedStartDate field supported"
          },
          "dynamic_pricing_display": {
            "status": "‚úÖ Complete",
            "early_bird_active": "‚úÖ Shows 'Early Bird Registration: $X' when before end date",
            "regular_price": "‚úÖ Shows 'Registration Fee: $Y' after early bird expires",
            "logic": "‚úÖ getCurrentPrice() and getPriceLabel() methods"
          },
          "registration_status": {
            "status": "‚úÖ Complete",
            "open": "‚úÖ Shows 'Register Now' button linking to /sessions",
            "closed": "‚úÖ Shows 'Registration Currently Closed' message",
            "logic": "‚úÖ Checks registrationOpenDate and registrationCloseDate"
          },
          "registration_period_display": {
            "status": "‚úÖ Complete",
            "description": "‚úÖ Only shown when registration dates are set",
            "format": "Opens: [datetime], Closes: [datetime]"
          }
        }
      },
      {
        "ui_polish": {
          "status": "‚úÖ Complete - November 19, 2025",
          "session_cards": {
            "background": "‚úÖ Ice blue gradient (linear-gradient(135deg, #e1f5fe 0%, #f1f8fb 100%))",
            "border": "‚úÖ Light blue border (#81d4fa)",
            "styling": "‚úÖ Matches hockey theme color palette"
          },
          "filter_card": {
            "background": "‚úÖ Matching ice blue gradient",
            "border": "‚úÖ Light blue border"
          },
          "status_badge": "‚úÖ Space added after 'Status:' label"
        }
      },
      {
        "bug_fixes": {
          "status": "‚úÖ All fixed - November 19, 2025",
          "fixes": [
            "‚úÖ Edit modal showing 'Create' instead of 'Edit'",
            "‚úÖ League name not displaying in admin sessions table",
            "‚úÖ Datetime values not saving correctly",
            "‚úÖ Datetime displaying wrong times in edit",
            "‚úÖ Success messages not including session names",
            "‚úÖ Start date missing day number",
            "‚úÖ Registration status showing incorrect state",
            "‚úÖ Register Now button not navigating to sessions page"
          ]
        }
      }
    ],
    "deferred_to_week_6": [
      "Full session registration form with address, phone, DOB fields",
      "Payment form integration (card details)",
      "Session capacity tracking and spots left display",
      "Enhanced SessionRegistration model with additional fields",
      "Admin session management enhancements (delete confirmation, filters)",
      "Comprehensive frontend unit tests",
      "Enhanced error handling with global interceptor"
    ]
  },
  "week_6": {
    "status": "üöÄ In Progress - November 24, 2025",
    "focus": "Session Registration Form, Capacity Management & Admin Analytics",
    "estimated_hours": "15 hours",
    "deliverables": [
      {
        "session_registration_form": {
          "status": "‚è≥ Not Started",
          "description": "Comprehensive registration form for session sign-ups",
          "authentication_required": true,
          "route": "/sessions/:id/register",
          "guard": "AuthGuard (must be logged in)",
          "form_fields": [
            "Name (from logged-in user, pre-filled, editable)",
            "Address (street, city, state, zip with validation)",
            "Phone number (format validation: (XXX) XXX-XXXX)",
            "Email (from logged-in user, pre-filled, read-only)",
            "Date of Birth (date picker, age validation: must be 18+)",
            "Position (dropdown: Forward, Defense, Forward/Defense, Goalie)",
            "Terms and Conditions checkbox (required)"
          ],
          "payment_section": {
            "service": "MockStripeService simulation",
            "fields": [
              "Card number (format: XXXX XXXX XXXX XXXX, validation)",
              "Expiry date (MM/YY, future date validation)",
              "CVV (3-4 digits)",
              "Cardholder name (required)"
            ],
            "validation": "Client-side validation for card format and expiry",
            "amount_display": "Show session regular price or early bird price, calculate total"
          },
          "session_details_display": {
            "session_name": "Display at top of form",
            "date_time": "Show session start/end datetime",
            "location": "Show league name and location if available",
            "spots_remaining": "Display 'X spots left' or 'Session Full' message"
          },
          "confirmation": {
            "success_message": "Registration successful! You're all set for [Session Name] on [Date].",
            "redirect": "Navigate to /profile or /dashboard after 2 seconds"
          },
          "error_handling": {
            "session_full": "Block registration and show 'Session is full' error",
            "registration_closed": "Block registration and show 'Registration has closed' error",
            "payment_failure": "Show error message, allow retry"
          }
        }
      },
      {
        "database_migrations": {
          "status": "‚è≥ Not Started",
          "sessions_table_updates": [
            "Note: MaxPlayers and IsActive already added in Week 5",
            "RegistrationOpenDate, RegistrationCloseDate, EarlyBirdPrice already added"
          ],
          "session_registrations_table": {
            "new_columns": [
              "Name NVARCHAR(100) NOT NULL (registrant full name)",
              "Address NVARCHAR(200) NULL (street address)",
              "City NVARCHAR(100) NULL",
              "State NVARCHAR(50) NULL",
              "ZipCode NVARCHAR(20) NULL",
              "Phone NVARCHAR(20) NULL (formatted phone)",
              "Email NVARCHAR(100) NOT NULL (registrant email)",
              "DateOfBirth DATE NOT NULL (for age verification)",
              "Position NVARCHAR(20) NULL (Forward, Defense, Goalie)",
              "RegistrationDate DATETIME2 NOT NULL DEFAULT GETUTCDATE()",
              "AmountPaid DECIMAL(10,2) NOT NULL (actual amount paid)"
            ],
            "indexes": [
              "IX_SessionRegistrations_RegistrationDate (for analytics)",
              "IX_SessionRegistrations_SessionId (for capacity queries)"
            ],
            "migration_name": "AddSessionRegistrationDetails"
          }
        }
      },
      {
        "session_capacity_management": {
          "status": "‚è≥ Not Started",
          "backend_changes": {
            "get_sessions_endpoint": {
              "add_fields": [
                "SpotsLeft (calculated: MaxPlayers - registration count)",
                "RegistrationCount (total registrations for session)",
                "IsFull (boolean: SpotsLeft <= 0)"
              ],
              "query_optimization": "Include registration count in single query"
            },
            "register_endpoint_validation": {
              "checks": [
                "Session exists and IsActive = true",
                "Registration window is open (between OpenDate and CloseDate)",
                "Session is not full (RegistrationCount < MaxPlayers)",
                "User not already registered for this session"
              ],
              "error_responses": [
                "400: Session is full",
                "400: Registration is closed",
                "409: Already registered"
              ]
            }
          },
          "frontend_updates": {
            "session_list_page": {
              "spots_display": "Show 'X spots left' badge on each session card",
              "full_badge": "Show 'Session Full' danger badge when spots = 0",
              "disable_register": "Disable Register button when full or registration closed",
              "visual_cue": "Reduce opacity or gray out full sessions"
            },
            "session_detail_modal": {
              "capacity_bar": "Optional: Progress bar showing filled spots",
              "registration_status": "Clear messaging about availability"
            }
          }
        }
      },
      {
        "backend_registration_enhancements": {
          "status": "‚è≥ Not Started",
          "session_registration_model": {
            "new_fields": [
              "int SessionId (required)",
              "string Name (required, max 100 chars)",
              "string Address (optional, max 200 chars)",
              "string City (optional, max 100 chars)",
              "string State (optional, max 50 chars)",
              "string ZipCode (optional, max 20 chars)",
              "string Phone (optional, validated format)",
              "string Email (required, validated email)",
              "DateTime DateOfBirth (required, age >= 18)",
              "string Position (optional, Forward/Defense/Forward/Defense/Goalie)",
              "PaymentInfo payment details (card info)"
            ],
            "validation_attributes": [
              "[Required], [StringLength], [EmailAddress], [Phone], [Range]"
            ]
          },
          "sessions_controller_updates": {
            "register_endpoint": "POST /api/sessions/register",
            "process": [
              "1. Validate model and user authentication",
              "2. Check session capacity and active status",
              "3. Check registration window dates",
              "4. Calculate amount (early bird or regular price)",
              "5. Process payment via MockStripeService",
              "6. Create SessionRegistration with all details",
              "7. Create Payment record",
              "8. Return success with session details"
            ]
          }
        }
      },
      {
        "admin_session_management_enhancements": {
          "status": "‚è≥ Not Started",
          "delete_confirmation_modal": {
            "description": "Bootstrap modal to confirm before deactivating session",
            "trigger": "Click Delete/Deactivate button in sessions table",
            "modal_content": "Warning: This will mark the session as inactive. Confirm?",
            "buttons": ["Cancel (secondary)", "Deactivate (danger)"],
            "action": "PUT /api/admin/sessions/{id} with IsActive = false"
          },
          "session_filter_dropdown": {
            "location": "Above sessions table in admin dashboard",
            "options": ["All Sessions", "Active Only", "Inactive Only"],
            "default": "Active Only",
            "visual_distinction": "Inactive sessions shown with opacity: 0.6 and gray badge"
          },
          "registrations_view": {
            "description": "View all registrations for a specific session",
            "trigger": "Click 'View Registrations' link/button in sessions table",
            "display": "Modal or separate page showing registrant details",
            "columns": [
              "Name",
              "Email",
              "Phone",
              "Position",
              "Registration Date",
              "Amount Paid"
            ],
            "endpoint": "GET /api/admin/sessions/{id}/registrations"
          },
          "manual_registration_management": {
            "description": "Admin can manually add or remove users from sessions",
            "add_user_to_session": {
              "trigger": "Button in session registrations view or sessions table",
              "modal": "Add User to Session modal",
              "fields": [
                "User dropdown/search (select existing user by email/name)",
                "Or manual entry: Name, Email, Phone, Address, DOB",
                "Position (dropdown: Forward, Defense, Forward/Defense, Goalie)",
                "Payment Status (Paid/Pending/Comped)",
                "Amount Paid (editable, defaults to session price)"
              ],
              "validation": [
                "Check session capacity before adding",
                "Prevent duplicate registrations",
                "Validate all required fields"
              ],
              "endpoint": "POST /api/admin/sessions/{id}/registrations/manual",
              "use_case": "Offline registrations, phone sign-ups, admin comps"
            },
            "remove_user_from_session": {
              "trigger": "Delete/Remove button next to each registrant in registrations view",
              "confirmation": "Modal: 'Remove [Name] from [Session]? This will mark their registration as cancelled.'",
              "action": "Soft delete: Set status to 'Cancelled' or hard delete registration and payment records",
              "options": [
                "Keep registration record with Cancelled status (recommended for audit trail)",
                "Fully delete registration and payment records (cascade delete)"
              ],
              "refund_note": "Display note: 'Refunds must be processed manually outside the system'",
              "endpoint": "DELETE /api/admin/sessions/{sessionId}/registrations/{registrationId}",
              "use_case": "User cancellations, duplicate registrations, refunds"
            }
          }
        }
      },
      {
        "admin_dashboard_analytics": {
          "status": "‚è≥ Not Started",
          "todays_registrations_card": {
            "title": "Today's Registrations",
            "metric": "Count of registrations where RegistrationDate = UTC today",
            "display": "Large number with trend indicator (up/down vs yesterday)",
            "icon": "Calendar or user icon",
            "api_endpoint": "GET /api/admin/dashboard/stats/registrations-today"
          },
          "registrations_per_session_table": {
            "title": "Session Registration Status",
            "location": "New card on admin dashboard",
            "columns": [
              "Session Name",
              "Date & Time",
              "League",
              "Registrations",
              "Max Players",
              "Spots Left",
              "Status"
            ],
            "sorting": "Sort by date descending (upcoming sessions first)",
            "visual_indicators": [
              "Green badge for sessions with >5 spots",
              "Yellow badge for 1-5 spots left",
              "Red badge for full sessions"
            ],
            "api_endpoint": "GET /api/admin/dashboard/sessions/registration-status"
          },
          "revenue_overview_card": {
            "title": "Revenue Summary",
            "metrics": [
              "Total Revenue All-Time (sum of all AmountPaid)",
              "Today's Revenue (sum where RegistrationDate = today)",
              "This Month's Revenue (sum where RegistrationDate in current month)",
              "Average Registration Fee"
            ],
            "display": "Card with 2x2 grid of metric boxes",
            "optional_chart": "Line chart showing daily revenue for last 30 days",
            "api_endpoint": "GET /api/admin/dashboard/stats/revenue"
          },
          "implementation_notes": {
            "new_controller": "AdminDashboardController.cs",
            "authorization": "[Authorize(Roles = \"Admin\")]",
            "timezone_handling": "All date calculations use UTC",
            "caching": "Consider caching stats for 5 minutes to reduce DB load"
          }
        }
      },
      {
        "testing_and_quality": {
          "status": "‚è≥ Not Started",
          "unit_tests": {
            "backend": [
              "Session capacity validation tests",
              "Registration window date logic tests",
              "Early bird price calculation tests",
              "Admin analytics queries accuracy",
              "Payment processing with new fields"
            ],
            "frontend": [
              "Registration form validation (all fields)",
              "Spots left calculation display",
              "Session full state handling",
              "Price display logic (early bird vs regular)",
              "Form submission and error handling"
            ]
          },
          "integration_tests": [
            "Complete registration flow end-to-end",
            "Capacity enforcement (prevent over-registration)",
            "Registration window enforcement",
            "Admin dashboard data accuracy",
            "Session status auto-updates"
          ],
          "manual_testing_checklist": [
            "Register for session with all form fields",
            "Try registering when session is full (should fail)",
            "Try registering outside registration window (should fail)",
            "Verify early bird pricing applied correctly",
            "Admin: View session registrations list",
            "Admin: Manually add user to session",
            "Admin: Remove user from session (verify confirmation)",
            "Admin: Try adding user when session is full (should fail)",
            "Admin: Check analytics dashboard metrics",
            "Admin: Filter sessions by active/inactive",
            "Admin: Deactivate session with confirmation modal"
          ]
        }
      },
      {
        "optional_enhancements": {
          "status": "Deferred",
          "items": [
            "Email notifications when registration opens for favorite leagues",
            "Admin report export (CSV of all registrations)",
            "Dark mode toggle for UI",
            "Performance optimization for large session lists",
            "Hockey-themed success animations on registration",
            "Comprehensive frontend unit test coverage (AuthService, DataService, all components)",
            "Global error interceptor with toast notifications"
          ]
        }
      }
    ],
    "priority_order": [
      "1. Database migration for SessionRegistrations table with new fields",
      "2. Backend: Update SessionRegistration model and validation",
      "3. Backend: Session capacity checking in register endpoint",
      "4. Backend: Add SpotsLeft to GetSessions response",
      "5. Frontend: Build comprehensive registration form component",
      "6. Frontend: Display spots left on session cards",
      "7. Frontend: Disable registration for full sessions",
      "8. Admin: Delete confirmation modal for sessions",
      "9. Admin: Session filter (active/inactive)",
      "10. Admin: View registrations for a session",
      "11. Admin: Manually add user to session (modal form)",
      "12. Admin: Remove user from session (with confirmation)",
      "13. Admin: Dashboard analytics (registrations today, revenue)",
      "14. Testing: Unit and integration tests for new features"
    ]
  },
  "database_schema_updates": {
    "leagues_table": {
      "new_columns": [
        "ExpectedStartDate DATETIME2 NULL (when league season is expected to start)",
        "PreRegisterPrice DECIMAL(10,2) NULL (early registration price for the league)"
      ],
      "migration_order": "Week 4 or 5 - needed for public leagues page display"
    },
    "sessions_table": {
      "new_columns": [
        "MaxPlayers INT NOT NULL DEFAULT 20",
        "IsActive BIT NOT NULL DEFAULT 1",
        "RegistrationOpenDate DATETIME2 NULL",
        "RegistrationCloseDate DATETIME2 NULL",
        "EarlyBirdEndDate DATETIME2 NULL",
        "EarlyBirdDiscountPercent DECIMAL(5,2) NULL"
      ],
      "migration_order": "Week 5 (MaxPlayers, IsActive), Week 6 (Registration dates)"
    },
    "registrations_table": {
      "new_columns": [
        "Name NVARCHAR(100) NOT NULL",
        "Address NVARCHAR(200)",
        "Phone NVARCHAR(20)",
        "Email NVARCHAR(100) NOT NULL",
        "DateOfBirth DATE NOT NULL",
        "RegistrationDate DATETIME2 NOT NULL DEFAULT GETUTCDATE()",
        "AmountPaid DECIMAL(10,2) NOT NULL"
      ],
      "indexes": [
        "IX_Registrations_RegistrationDate (for today's registrations query)",
        "IX_Registrations_SessionId (for session analytics)"
      ],
      "migration_order": "Week 5"
    }
  },
  "repo": "https://github.com/Dean92/hockey-rink-website"
}

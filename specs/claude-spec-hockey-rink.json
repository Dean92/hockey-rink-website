{
  "project": "Hockey Rink Website MVP",
  "timeline": {
    "start": "2025-08-22",
    "end": "2025-10-20",
    "daily_hours": "1‚Äì2"
  },
  "tech_stack": {
    "backend": ".NET Core 9, ASP.NET Core, Azure SQL (Free Tier)",
    "frontend": "Angular 20, Bootstrap 5.3.3",
    "devops": "GitHub Actions, Azure Static Web Apps"
  },
  "features": [
    "User registration and login",
    "League and session browsing",
    "Session registration and payment simulation",
    "Team drafts and admin dashboard",
    "User profile management",
    "Notifications and error handling"
  ],
  "week_1": {
    "status": "Completed",
    "focus": "Backend setup",
    "deliverables": [
      "Models: Player, League, Session, Payment, etc.",
      "API endpoints: /api/auth/*, /api/users/profile, /api/sessions, /api/leagues",
      "xUnit tests passing",
      "Azure SQL configured and seeded"
    ]
  },
  "week_2": {
    "status": "Completed",
    "focus": "Frontend setup",
    "deliverables": [
      "Angular components: Login, Register, Leagues, Sessions, Profile",
      "Bootstrap styling",
      "Deployed to Azure Static Web Apps"
    ]
  },
  "week_3": {
    "status": "‚úÖ Completed - November 11, 2025",
    "focus": "Admin Features & Enhancements",
    "estimated_hours": "10 hours",
    "deliverables": [
      "‚úÖ Admin dashboard with statistics",
      "‚úÖ Admin sessions management (full CRUD)",
      "‚úÖ Admin users management",
      "‚úÖ Session filtering by league and date",
      "‚úÖ AuthGuard and AdminGuard implementation",
      "‚úÖ TypeScript interfaces (League, Session, etc.)",
      "‚úÖ Angular 20 control flow (@if, @for)",
      "‚úÖ Database migrations (LeagueId with FK constraints)",
      "‚úÖ Accessibility improvements (ARIA labels)",
      "‚úÖ Login redirects to dashboard",
      "‚úÖ Conditional navigation (auth-based)",
      "‚úÖ Admin sessions component with reactive forms and modals",
      "‚úÖ Code formatting and quality improvements"
    ],
    "deferred_to_week_4": [
      "UI polish with hockey-themed branding",
      "Frontend unit tests (comprehensive coverage)",
      "Error handling enhancements (toast notifications)"
    ]
  },
  "week_4": {
    "status": "‚úÖ Completed - November 2025",
    "focus": "Landing Page & UI Polish",
    "estimated_hours": "10 hours",
    "deliverables": [
      {
        "landing_page": {
          "status": "‚úÖ Complete",
          "hero_section": {
            "layout": "‚úÖ Full-width Bootstrap grid with animated ice pattern",
            "headline": "‚úÖ Hit the Ice. Join a League. Track Your Sessions.",
            "subtext": "‚úÖ Manage your hockey schedule, register for sessions, and connect with your team‚Äîall in one place.",
            "cta_buttons": "‚úÖ [Get Started, Browse Leagues]",
            "image": "‚úÖ Hockey-themed SVG ice pattern background with gradient"
          },
          "features_overview": {
            "status": "‚úÖ Complete with animated cards",
            "cards": [
              "‚úÖ Browse leagues and sessions",
              "‚úÖ Register and pay online",
              "‚úÖ Track your hockey stats"
            ]
          }
        }
      },
      {
        "ui_polish": {
          "status": "‚úÖ Complete",
          "colors": {
            "ice_blue": "‚úÖ #4FC3F7 (--ice-blue)",
            "puck_black": "‚úÖ #212529 (--puck-black)",
            "goal_red": "‚úÖ #DC3545 (--goal-red)"
          },
          "effects": "‚úÖ Hover transitions, smooth scrolling, SVG hockey icons, card animations",
          "responsive": "‚úÖ Mobile, tablet, desktop layouts verified",
          "session_cards": "‚úÖ Ice blue gradient backgrounds with border styling"
        }
      },
      {
        "navigation_enhancements": {
          "status": "‚úÖ Complete",
          "active_route_highlighting": "‚úÖ Bootstrap active class on current route",
          "smooth_transitions": "‚úÖ CSS transitions on all interactive elements"
        }
      },
      {
        "optional_addons": [
          "‚úÖ 404 page with hockey-themed design",
          "‚úÖ Final deployment verified on Azure",
          "‚úÖ Toast notifications system integrated"
        ]
      }
    ],
    "deployed_to_azure": "‚úÖ Successfully deployed and verified"
  },
  "week_5": {
    "status": "‚úÖ Completed - November 19, 2025",
    "focus": "Session Registration Enhancements & Admin League Management",
    "estimated_hours": "10 hours",
    "completed_items": [
      {
        "admin_league_management": {
          "status": "‚úÖ Complete - November 19, 2025",
          "description": "Full CRUD interface for managing league settings",
          "components": [
            "‚úÖ AdminLeagues component with reactive forms",
            "‚úÖ Edit league modal with validation",
            "‚úÖ Backend endpoints: GET /api/admin/leagues, PUT /api/admin/leagues/{id}",
            "‚úÖ Navigation link added to admin dashboard"
          ],
          "database_changes": [
            "‚úÖ Added StartDate, EarlyBirdPrice, EarlyBirdEndDate, RegularPrice to League model",
            "‚úÖ Added RegistrationOpenDate, RegistrationCloseDate to League model",
            "‚úÖ Migrations: AddLeagueRegistrationFields, AddLeaguePricingFields applied"
          ]
        }
      },
      {
        "session_enhancements": {
          "status": "‚úÖ Complete - November 19, 2025",
          "max_players_management": {
            "status": "‚úÖ Complete",
            "description": "Admin can set max players (1-250) for each session",
            "default": "20 players",
            "validation": "Min: 1, Max: 250"
          },
          "registration_windows": {
            "status": "‚úÖ Complete",
            "fields": [
              "‚úÖ RegistrationOpenDate (datetime-local input)",
              "‚úÖ RegistrationCloseDate (datetime-local input)"
            ],
            "auto_status_management": "‚úÖ Sessions auto-activate when registration opens, auto-deactivate when closed or session ends"
          },
          "pricing_tiers": {
            "status": "‚úÖ Complete",
            "fields": [
              "‚úÖ EarlyBirdPrice (optional)",
              "‚úÖ EarlyBirdEndDate (datetime-local)",
              "‚úÖ RegularPrice (replaces Fee field)"
            ],
            "display_logic": "‚úÖ Shows early bird price before end date, switches to regular price after"
          },
          "inactive_session_handling": {
            "status": "‚úÖ Complete",
            "description": "‚úÖ Register button hidden for inactive sessions",
            "admin_control": "‚úÖ Admin can manually toggle IsActive status"
          }
        }
      },
      {
        "leagues_page_enhancements": {
          "status": "‚úÖ Complete - November 19, 2025",
          "start_date_display": {
            "status": "‚úÖ Fixed",
            "format": "Month Day, Year (e.g., November 15, 2025)",
            "fallback": "Legacy expectedStartDate field supported"
          },
          "dynamic_pricing_display": {
            "status": "‚úÖ Complete",
            "early_bird_active": "‚úÖ Shows 'Early Bird Registration: $X' when before end date",
            "regular_price": "‚úÖ Shows 'Registration Fee: $Y' after early bird expires",
            "logic": "‚úÖ getCurrentPrice() and getPriceLabel() methods"
          },
          "registration_status": {
            "status": "‚úÖ Complete",
            "open": "‚úÖ Shows 'Register Now' button linking to /sessions",
            "closed": "‚úÖ Shows 'Registration Currently Closed' message",
            "logic": "‚úÖ Checks registrationOpenDate and registrationCloseDate"
          },
          "registration_period_display": {
            "status": "‚úÖ Complete",
            "description": "‚úÖ Only shown when registration dates are set",
            "format": "Opens: [datetime], Closes: [datetime]"
          }
        }
      },
      {
        "ui_polish": {
          "status": "‚úÖ Complete - November 19, 2025",
          "session_cards": {
            "background": "‚úÖ Ice blue gradient (linear-gradient(135deg, #e1f5fe 0%, #f1f8fb 100%))",
            "border": "‚úÖ Light blue border (#81d4fa)",
            "styling": "‚úÖ Matches hockey theme color palette"
          },
          "filter_card": {
            "background": "‚úÖ Matching ice blue gradient",
            "border": "‚úÖ Light blue border"
          },
          "status_badge": "‚úÖ Space added after 'Status:' label"
        }
      },
      {
        "bug_fixes": {
          "status": "‚úÖ All fixed - November 19, 2025",
          "fixes": [
            "‚úÖ Edit modal showing 'Create' instead of 'Edit'",
            "‚úÖ League name not displaying in admin sessions table",
            "‚úÖ Datetime values not saving correctly",
            "‚úÖ Datetime displaying wrong times in edit",
            "‚úÖ Success messages not including session names",
            "‚úÖ Start date missing day number",
            "‚úÖ Registration status showing incorrect state",
            "‚úÖ Register Now button not navigating to sessions page"
          ]
        }
      }
    ],
    "deferred_to_week_6": [
      "Full session registration form with address, phone, DOB fields",
      "Payment form integration (card details)",
      "Session capacity tracking and spots left display",
      "Enhanced SessionRegistration model with additional fields",
      "Admin session management enhancements (delete confirmation, filters)",
      "Comprehensive frontend unit tests",
      "Enhanced error handling with global interceptor"
    ]
  },
  "week_6": {
    "status": "üöÄ In Progress - November 24, 2025",
    "focus": "Session Registration Form, Capacity Management & Admin Analytics",
    "estimated_hours": "15 hours",
    "deliverables": [
      {
        "session_registration_form": {
          "status": "‚è≥ Not Started",
          "description": "Comprehensive registration form for session sign-ups",
          "authentication_required": true,
          "route": "/sessions/:id/register",
          "guard": "AuthGuard (must be logged in)",
          "form_fields": [
            "Name (from logged-in user, pre-filled, editable)",
            "Address (street, city, state, zip with validation)",
            "Phone number (format validation: (XXX) XXX-XXXX)",
            "Email (from logged-in user, pre-filled, read-only)",
            "Date of Birth (date picker, age validation: must be 18+)",
            "Position (dropdown: Forward, Defense, Forward/Defense, Goalie)",
            "Terms and Conditions checkbox (required)"
          ],
          "payment_section": {
            "service": "MockStripeService simulation",
            "fields": [
              "Card number (format: XXXX XXXX XXXX XXXX, validation)",
              "Expiry date (MM/YY, future date validation)",
              "CVV (3-4 digits)",
              "Cardholder name (required)"
            ],
            "validation": "Client-side validation for card format and expiry",
            "amount_display": "Show session regular price or early bird price, calculate total"
          },
          "session_details_display": {
            "session_name": "Display at top of form",
            "date_time": "Show session start/end datetime",
            "location": "Show league name and location if available",
            "spots_remaining": "Display 'X spots left' or 'Session Full' message"
          },
          "confirmation": {
            "success_message": "Registration successful! You're all set for [Session Name] on [Date].",
            "redirect": "Navigate to /profile or /dashboard after 2 seconds"
          },
          "error_handling": {
            "session_full": "Block registration and show 'Session is full' error",
            "registration_closed": "Block registration and show 'Registration has closed' error",
            "payment_failure": "Show error message, allow retry"
          }
        }
      },
      {
        "database_migrations": {
          "status": "‚è≥ Not Started",
          "sessions_table_updates": [
            "Note: MaxPlayers and IsActive already added in Week 5",
            "RegistrationOpenDate, RegistrationCloseDate, EarlyBirdPrice already added"
          ],
          "session_registrations_table": {
            "new_columns": [
              "Name NVARCHAR(100) NOT NULL (registrant full name)",
              "Address NVARCHAR(200) NULL (street address)",
              "City NVARCHAR(100) NULL",
              "State NVARCHAR(50) NULL",
              "ZipCode NVARCHAR(20) NULL",
              "Phone NVARCHAR(20) NULL (formatted phone)",
              "Email NVARCHAR(100) NOT NULL (registrant email)",
              "DateOfBirth DATE NOT NULL (for age verification)",
              "Position NVARCHAR(20) NULL (Forward, Defense, Goalie)",
              "RegistrationDate DATETIME2 NOT NULL DEFAULT GETUTCDATE()",
              "AmountPaid DECIMAL(10,2) NOT NULL (actual amount paid)"
            ],
            "indexes": [
              "IX_SessionRegistrations_RegistrationDate (for analytics)",
              "IX_SessionRegistrations_SessionId (for capacity queries)"
            ],
            "migration_name": "AddSessionRegistrationDetails"
          }
        }
      },
      {
        "session_capacity_management": {
          "status": "‚è≥ Not Started",
          "backend_changes": {
            "get_sessions_endpoint": {
              "add_fields": [
                "SpotsLeft (calculated: MaxPlayers - registration count)",
                "RegistrationCount (total registrations for session)",
                "IsFull (boolean: SpotsLeft <= 0)"
              ],
              "query_optimization": "Include registration count in single query"
            },
            "register_endpoint_validation": {
              "checks": [
                "Session exists and IsActive = true",
                "Registration window is open (between OpenDate and CloseDate)",
                "Session is not full (RegistrationCount < MaxPlayers)",
                "User not already registered for this session"
              ],
              "error_responses": [
                "400: Session is full",
                "400: Registration is closed",
                "409: Already registered"
              ]
            }
          },
          "frontend_updates": {
            "session_list_page": {
              "spots_display": "Show 'X spots left' badge on each session card",
              "full_badge": "Show 'Session Full' danger badge when spots = 0",
              "disable_register": "Disable Register button when full or registration closed",
              "visual_cue": "Reduce opacity or gray out full sessions"
            },
            "session_detail_modal": {
              "capacity_bar": "Optional: Progress bar showing filled spots",
              "registration_status": "Clear messaging about availability"
            }
          }
        }
      },
      {
        "backend_registration_enhancements": {
          "status": "‚è≥ Not Started",
          "session_registration_model": {
            "new_fields": [
              "int SessionId (required)",
              "string Name (required, max 100 chars)",
              "string Address (optional, max 200 chars)",
              "string City (optional, max 100 chars)",
              "string State (optional, max 50 chars)",
              "string ZipCode (optional, max 20 chars)",
              "string Phone (optional, validated format)",
              "string Email (required, validated email)",
              "DateTime DateOfBirth (required, age >= 18)",
              "string Position (optional, Forward/Defense/Forward/Defense/Goalie)",
              "PaymentInfo payment details (card info)"
            ],
            "validation_attributes": [
              "[Required], [StringLength], [EmailAddress], [Phone], [Range]"
            ]
          },
          "sessions_controller_updates": {
            "register_endpoint": "POST /api/sessions/register",
            "process": [
              "1. Validate model and user authentication",
              "2. Check session capacity and active status",
              "3. Check registration window dates",
              "4. Calculate amount (early bird or regular price)",
              "5. Process payment via MockStripeService",
              "6. Create SessionRegistration with all details",
              "7. Create Payment record",
              "8. Return success with session details"
            ]
          }
        }
      },
      {
        "admin_session_management_enhancements": {
          "status": "‚è≥ Not Started",
          "delete_confirmation_modal": {
            "description": "Bootstrap modal to confirm before deactivating session",
            "trigger": "Click Delete/Deactivate button in sessions table",
            "modal_content": "Warning: This will mark the session as inactive. Confirm?",
            "buttons": ["Cancel (secondary)", "Deactivate (danger)"],
            "action": "PUT /api/admin/sessions/{id} with IsActive = false"
          },
          "session_filter_dropdown": {
            "location": "Above sessions table in admin dashboard",
            "options": ["All Sessions", "Active Only", "Inactive Only"],
            "default": "Active Only",
            "visual_distinction": "Inactive sessions shown with opacity: 0.6 and gray badge"
          },
          "registrations_view": {
            "description": "View all registrations for a specific session",
            "trigger": "Click 'View Registrations' link/button in sessions table",
            "display": "Modal or separate page showing registrant details",
            "columns": [
              "Name",
              "Email",
              "Phone",
              "Position",
              "Registration Date",
              "Amount Paid"
            ],
            "endpoint": "GET /api/admin/sessions/{id}/registrations"
          },
          "manual_registration_management": {
            "description": "Admin can manually add or remove users from sessions",
            "add_user_to_session": {
              "trigger": "Button in session registrations view or sessions table",
              "modal": "Add User to Session modal",
              "fields": [
                "User dropdown/search (select existing user by email/name)",
                "Or manual entry: Name, Email, Phone, Address, DOB",
                "Position (dropdown: Forward, Defense, Forward/Defense, Goalie)",
                "Payment Status (Paid/Pending/Comped)",
                "Amount Paid (editable, defaults to session price)"
              ],
              "validation": [
                "Check session capacity before adding",
                "Prevent duplicate registrations",
                "Validate all required fields"
              ],
              "endpoint": "POST /api/admin/sessions/{id}/registrations/manual",
              "use_case": "Offline registrations, phone sign-ups, admin comps"
            },
            "remove_user_from_session": {
              "trigger": "Delete/Remove button next to each registrant in registrations view",
              "confirmation": "Modal: 'Remove [Name] from [Session]? This will mark their registration as cancelled.'",
              "action": "Soft delete: Set status to 'Cancelled' or hard delete registration and payment records",
              "options": [
                "Keep registration record with Cancelled status (recommended for audit trail)",
                "Fully delete registration and payment records (cascade delete)"
              ],
              "refund_note": "Display note: 'Refunds must be processed manually outside the system'",
              "endpoint": "DELETE /api/admin/sessions/{sessionId}/registrations/{registrationId}",
              "use_case": "User cancellations, duplicate registrations, refunds"
            }
          }
        }
      },
      {
        "admin_dashboard_analytics": {
          "status": "‚è≥ Not Started",
          "todays_registrations_card": {
            "title": "Today's Registrations",
            "metric": "Count of registrations where RegistrationDate = UTC today",
            "display": "Large number with trend indicator (up/down vs yesterday)",
            "icon": "Calendar or user icon",
            "api_endpoint": "GET /api/admin/dashboard/stats/registrations-today"
          },
          "registrations_per_session_table": {
            "title": "Session Registration Status",
            "location": "New card on admin dashboard",
            "columns": [
              "Session Name",
              "Date & Time",
              "League",
              "Registrations",
              "Max Players",
              "Spots Left",
              "Status"
            ],
            "sorting": "Sort by date descending (upcoming sessions first)",
            "visual_indicators": [
              "Green badge for sessions with >5 spots",
              "Yellow badge for 1-5 spots left",
              "Red badge for full sessions"
            ],
            "api_endpoint": "GET /api/admin/dashboard/sessions/registration-status"
          },
          "revenue_overview_card": {
            "title": "Revenue Summary",
            "metrics": [
              "Total Revenue All-Time (sum of all AmountPaid)",
              "Today's Revenue (sum where RegistrationDate = today)",
              "This Month's Revenue (sum where RegistrationDate in current month)",
              "Average Registration Fee"
            ],
            "display": "Card with 2x2 grid of metric boxes",
            "optional_chart": "Line chart showing daily revenue for last 30 days",
            "api_endpoint": "GET /api/admin/dashboard/stats/revenue"
          },
          "implementation_notes": {
            "new_controller": "AdminDashboardController.cs",
            "authorization": "[Authorize(Roles = \"Admin\")]",
            "timezone_handling": "All date calculations use UTC",
            "caching": "Consider caching stats for 5 minutes to reduce DB load"
          }
        }
      },
      {
        "testing_and_quality": {
          "status": "‚è≥ Not Started",
          "unit_tests": {
            "backend": [
              "Session capacity validation tests",
              "Registration window date logic tests",
              "Early bird price calculation tests",
              "Admin analytics queries accuracy",
              "Payment processing with new fields"
            ],
            "frontend": [
              "Registration form validation (all fields)",
              "Spots left calculation display",
              "Session full state handling",
              "Price display logic (early bird vs regular)",
              "Form submission and error handling"
            ]
          },
          "integration_tests": [
            "Complete registration flow end-to-end",
            "Capacity enforcement (prevent over-registration)",
            "Registration window enforcement",
            "Admin dashboard data accuracy",
            "Session status auto-updates"
          ],
          "manual_testing_checklist": [
            "Register for session with all form fields",
            "Try registering when session is full (should fail)",
            "Try registering outside registration window (should fail)",
            "Verify early bird pricing applied correctly",
            "Admin: View session registrations list",
            "Admin: Manually add user to session",
            "Admin: Remove user from session (verify confirmation)",
            "Admin: Try adding user when session is full (should fail)",
            "Admin: Check analytics dashboard metrics",
            "Admin: Filter sessions by active/inactive",
            "Admin: Deactivate session with confirmation modal"
          ]
        }
      },
      {
        "optional_enhancements": {
          "status": "Deferred",
          "items": [
            "Email notifications when registration opens for favorite leagues",
            "Admin report export (CSV of all registrations)",
            "Dark mode toggle for UI",
            "Performance optimization for large session lists",
            "Hockey-themed success animations on registration",
            "Comprehensive frontend unit test coverage (AuthService, DataService, all components)",
            "Global error interceptor with toast notifications"
          ]
        }
      }
    ],
    "priority_order": [
      "1. Database migration for SessionRegistrations table with new fields",
      "2. Backend: Update SessionRegistration model and validation",
      "3. Backend: Session capacity checking in register endpoint",
      "4. Backend: Add SpotsLeft to GetSessions response",
      "5. Frontend: Build comprehensive registration form component",
      "6. Frontend: Display spots left on session cards",
      "7. Frontend: Disable registration for full sessions",
      "8. Admin: Delete confirmation modal for sessions",
      "9. Admin: Session filter (active/inactive)",
      "10. Admin: View registrations for a session",
      "11. Admin: Manually add user to session (modal form)",
      "12. Admin: Remove user from session (with confirmation)",
      "13. Admin: Dashboard analytics (registrations today, revenue)",
      "14. Testing: Unit and integration tests for new features"
    ]
  },
  "database_schema_updates": {
    "leagues_table": {
      "new_columns": [
        "ExpectedStartDate DATETIME2 NULL (when league season is expected to start)",
        "PreRegisterPrice DECIMAL(10,2) NULL (early registration price for the league)"
      ],
      "migration_order": "Week 4 or 5 - needed for public leagues page display"
    },
    "sessions_table": {
      "new_columns": [
        "MaxPlayers INT NOT NULL DEFAULT 20",
        "IsActive BIT NOT NULL DEFAULT 1",
        "RegistrationOpenDate DATETIME2 NULL",
        "RegistrationCloseDate DATETIME2 NULL",
        "EarlyBirdEndDate DATETIME2 NULL",
        "EarlyBirdDiscountPercent DECIMAL(5,2) NULL"
      ],
      "migration_order": "Week 5 (MaxPlayers, IsActive), Week 6 (Registration dates)"
    },
    "registrations_table": {
      "new_columns": [
        "Name NVARCHAR(100) NOT NULL",
        "Address NVARCHAR(200)",
        "Phone NVARCHAR(20)",
        "Email NVARCHAR(100) NOT NULL",
        "DateOfBirth DATE NOT NULL",
        "RegistrationDate DATETIME2 NOT NULL DEFAULT GETUTCDATE()",
        "AmountPaid DECIMAL(10,2) NOT NULL"
      ],
      "indexes": [
        "IX_Registrations_RegistrationDate (for today's registrations query)",
        "IX_Registrations_SessionId (for session analytics)"
      ],
      "migration_order": "Week 5"
    }
  },
  "week_7": {
    "status": "ÔøΩ In Progress - December 30, 2025",
    "focus": "Payment Integration, User Profile Management & Session History",
    "estimated_hours": "12-15 hours",
    "deliverables": [
      {
        "mock_payment_form": {
          "status": "‚úÖ Completed",
          "description": "Mock credit card form for session registration (not connected to Stripe)",
          "location": "Session registration page (/sessions/:id/register)",
          "form_fields": {
            "card_number": {
              "label": "Card Number",
              "format": "XXXX XXXX XXXX XXXX",
              "validation": [
                "16 digits required",
                "Auto-format with spaces every 4 digits",
                "Test card: 4242 4242 4242 4242 (always succeeds)",
                "Test card: 4000 0000 0000 0002 (always fails)"
              ],
              "max_length": 19
            },
            "expiry_date": {
              "label": "Expiry Date",
              "format": "MM/YY",
              "validation": [
                "Must be future date",
                "Month: 01-12",
                "Year: Current year or later"
              ],
              "auto_format": "Add / after 2 digits"
            },
            "cvv": {
              "label": "CVV",
              "format": "XXX or XXXX",
              "validation": ["3-4 digits", "Numeric only"],
              "type": "password"
            },
            "cardholder_name": {
              "label": "Cardholder Name",
              "validation": "Required, min 3 characters",
              "placeholder": "Name as it appears on card"
            }
          },
          "mock_processing": {
            "service": "MockPaymentService (backend)",
            "behavior": [
              "Card 4242 4242 4242 4242 ‚Üí Success with transaction ID",
              "Card 4000 0000 0000 0002 ‚Üí Decline with error message",
              "All other valid formats ‚Üí Success",
              "Generate mock transaction ID: 'MOCK_TXN_' + Guid"
            ],
            "processing_time": "Add 1-2 second delay to simulate real processing",
            "response_fields": [
              "success (boolean)",
              "transactionId (string)",
              "errorMessage (string, if failed)",
              "processedAt (DateTime)"
            ]
          },
          "ui_components": {
            "payment_section_card": "Bootstrap card with lock icon and 'Secure Payment' header",
            "submit_button_states": [
              "Default: 'Complete Registration'",
              "Processing: 'Processing Payment...' with spinner",
              "Success: Briefly show checkmark before redirect"
            ],
            "error_display": "Show payment errors in red alert above form",
            "card_type_icon": "Optional: Show Visa/MC/Amex icon based on first digit"
          },
          "success_flow": {
            "on_success": [
              "1. Create SessionRegistration with all form data",
              "2. Create Payment record with mock transaction ID",
              "3. Show success toast: 'Registration successful!'",
              "4. Redirect to /dashboard or /profile after 2 seconds"
            ]
          },
          "validation_summary": [
            "All personal info fields validated (name, email, DOB, address, phone)",
            "Payment fields validated before submission",
            "Check session capacity before processing payment",
            "Display clear error messages for each validation failure"
          ]
        }
      },
      {
        "manual_registration_password_setup": {
          "status": "‚úÖ Completed",
          "description": "Allow manually registered users to set password and fully activate account",
          "problem": "Users added manually by admin don't have passwords and can't log in",
          "solution_approach": "Email-based password setup flow",
          "database_changes": {
            "application_user_updates": [
              "Add 'IsManuallyRegistered' boolean field (default false)",
              "Add 'PasswordSetupToken' string field (nullable, for one-time setup)",
              "Add 'PasswordSetupTokenExpiry' DateTime field (nullable)"
            ],
            "migration_name": "AddManualRegistrationFields"
          },
          "backend_implementation": {
            "admin_manual_registration_endpoint": {
              "endpoint": "POST /api/admin/sessions/{sessionId}/registrations/manual",
              "process": [
                "1. Admin enters user email, name, phone, address, DOB, position",
                "2. Check if user exists by email",
                "3a. If user exists: Add them to session with existing profile",
                "3b. If user doesn't exist: Create ApplicationUser with IsManuallyRegistered = true",
                "4. Generate secure PasswordSetupToken (Guid)",
                "5. Set token expiry to 7 days from now",
                "6. Create SessionRegistration record",
                "7. Send email with password setup link (optional for MVP, can log to console)",
                "8. Return success message"
              ],
              "request_model": {
                "fields": [
                  "string Email (required)",
                  "string Name (required)",
                  "string Phone (optional)",
                  "string Address (optional)",
                  "string City (optional)",
                  "string State (optional)",
                  "string ZipCode (optional)",
                  "DateTime DateOfBirth (required, age >= 18)",
                  "string Position (optional)",
                  "decimal AmountPaid (required)",
                  "string PaymentStatus (Paid/Pending/Comped)"
                ]
              }
            },
            "password_setup_endpoints": {
              "validate_token": "GET /api/auth/setup-password/{token}",
              "validate_response": {
                "valid": "Return user email and token validity",
                "invalid": "Return 400 with error message"
              },
              "set_password": "POST /api/auth/setup-password",
              "set_password_request": {
                "token": "string (required)",
                "password": "string (required, min 6 chars)",
                "confirmPassword": "string (must match password)"
              },
              "process": [
                "1. Validate token exists and not expired",
                "2. Find user by token",
                "3. Set user password using UserManager",
                "4. Mark IsManuallyRegistered = false",
                "5. Clear PasswordSetupToken and expiry",
                "6. Set EmailConfirmed = true",
                "7. Return success message"
              ]
            }
          },
          "frontend_implementation": {
            "setup_password_page": {
              "route": "/setup-password/:token",
              "component": "SetupPasswordComponent",
              "no_auth_required": true,
              "form_fields": [
                "Email (display only, fetched from token)",
                "Password (input, password type, min 6 chars)",
                "Confirm Password (input, must match)"
              ],
              "validation": [
                "Password minimum 6 characters",
                "Passwords must match",
                "Show strength indicator (optional)"
              ],
              "on_success": [
                "Show success message: 'Password set successfully! You can now log in.'",
                "Redirect to /login after 2 seconds"
              ],
              "on_token_invalid": "Show error: 'This link is invalid or expired. Please contact admin.'"
            },
            "admin_manual_registration_modal": {
              "improvements": [
                "Add checkbox: 'Send password setup email' (checked by default)",
                "Show message after success: 'User registered. Password setup link sent to [email]' or 'User registered. Password setup link: [copy link]'",
                "Display password setup link in modal for admin to manually share if email fails"
              ]
            }
          },
          "email_notification": {
            "priority": "Optional for MVP (can log link to console)",
            "subject": "Complete Your Hockey Rink Registration",
            "body_template": "Hi [Name], You've been registered for [Session Name] by an administrator. To access your account, please set your password: [Link]. This link expires in 7 days.",
            "implementation_note": "Can use IEmailSender or log to console/file for MVP"
          }
        }
      },
      {
        "user_profile_enhancements": {
          "status": "‚úÖ Completed",
          "description": "Allow users to edit personal information from registration",
          "current_profile_page": "/profile",
          "database_updates": {
            "application_user_model": {
              "add_fields": [
                "string? Address (street address)",
                "string? City",
                "string? State",
                "string? ZipCode",
                "string? Phone (formatted: (XXX) XXX-XXXX)",
                "DateTime? DateOfBirth",
                "string? Position (Forward/Defense/Forward/Defense/Goalie)",
                "string? PreferredLeagueName (display only, from League relationship)"
              ],
              "migration_name": "AddUserProfileFields"
            },
            "sync_with_registrations": "When user registers for first session, copy their registration info to ApplicationUser profile"
          },
          "backend_implementation": {
            "get_profile_endpoint": {
              "endpoint": "GET /api/users/profile",
              "add_fields_to_response": [
                "Address, City, State, ZipCode",
                "Phone, DateOfBirth, Position",
                "LeagueName (from League navigation property)",
                "CurrentSessionsCount",
                "TotalSessionsCount"
              ]
            },
            "update_profile_endpoint": {
              "endpoint": "PUT /api/users/profile",
              "request_model": {
                "firstName": "string (optional)",
                "lastName": "string (optional)",
                "address": "string (optional)",
                "city": "string (optional)",
                "state": "string (optional)",
                "zipCode": "string (optional)",
                "phone": "string (optional, validated format)",
                "dateOfBirth": "DateTime (optional, age >= 18)",
                "position": "string (optional)",
                "leagueId": "int? (optional, user's preferred league)"
              },
              "validation": [
                "Phone format: (XXX) XXX-XXXX",
                "DateOfBirth: Must be 18+ years old",
                "Position: Forward/Defense/Forward/Defense/Goalie only",
                "ZipCode: Valid US format (optional)"
              ],
              "process": [
                "1. Get authenticated user",
                "2. Update user properties",
                "3. Set UpdatedAt = DateTime.UtcNow",
                "4. Save to database",
                "5. Return updated profile"
              ]
            }
          },
          "frontend_implementation": {
            "profile_page_sections": {
              "personal_information_card": {
                "title": "Personal Information",
                "fields_displayed": [
                  "Name (FirstName + LastName) - editable",
                  "Email - read-only (from Identity)",
                  "Phone - editable",
                  "Date of Birth - editable",
                  "Address (full: street, city, state, zip) - editable",
                  "Position - dropdown editable",
                  "Preferred League - dropdown editable (from leagues list)"
                ],
                "edit_mode": "Toggle between view/edit with 'Edit Profile' button",
                "buttons": [
                  "'Edit Profile' ‚Üí Switches to edit mode",
                  "'Save Changes' ‚Üí Submits form, switches back to view mode",
                  "'Cancel' ‚Üí Discards changes, returns to view mode"
                ],
                "validation": "Show inline errors for invalid fields"
              },
              "account_information_card": {
                "title": "Account Information",
                "fields_displayed": [
                  "Email Confirmed: Yes/No badge",
                  "Account Created: [Date]",
                  "Last Updated: [Date]",
                  "Is Sub Available: Toggle switch (allow users to mark if available as sub)"
                ],
                "change_password_button": "Link to /change-password page or modal"
              },
              "session_information_card": {
                "title": "My Sessions",
                "description": "Current and upcoming sessions you're registered for",
                "move_to_dashboard": "This will be expanded on dashboard (see below)"
              }
            }
          }
        }
      },
      {
        "user_dashboard_session_history": {
          "status": "‚úÖ Completed",
          "description": "Show current/upcoming and past sessions on user dashboard",
          "route": "/dashboard",
          "component": "DashboardComponent (user's landing page after login)",
          "database_queries": {
            "current_upcoming_sessions": {
              "description": "Sessions user is registered for with StartDate >= Today",
              "query": "JOIN SessionRegistrations ON UserId, JOIN Sessions WHERE StartDate >= UTC Today, ORDER BY StartDate ASC",
              "display_limit": "Show all upcoming sessions"
            },
            "past_sessions": {
              "description": "Sessions user attended with StartDate < Today",
              "query": "JOIN SessionRegistrations ON UserId, JOIN Sessions WHERE StartDate < UTC Today, ORDER BY StartDate DESC",
              "display_limit": "Show last 10 sessions, with 'View All' link"
            }
          },
          "backend_implementation": {
            "new_endpoint": "GET /api/users/my-sessions",
            "query_parameters": [
              "status (optional): 'upcoming' | 'past' | 'all' (default: all)",
              "limit (optional): number of results (default: 10 for past, unlimited for upcoming)"
            ],
            "response_model": {
              "upcoming": [
                {
                  "sessionId": "int",
                  "sessionName": "string",
                  "leagueName": "string",
                  "startDate": "DateTime",
                  "endDate": "DateTime",
                  "location": "string (optional)",
                  "registrationDate": "DateTime (when user registered)",
                  "amountPaid": "decimal",
                  "position": "string (user's position for this session)"
                }
              ],
              "past": "[same structure as upcoming]",
              "totalUpcoming": "int",
              "totalPast": "int"
            }
          },
          "frontend_implementation": {
            "dashboard_layout": {
              "welcome_section": "Welcome back, [FirstName]!",
              "upcoming_sessions_card": {
                "title": "Upcoming Sessions",
                "empty_state": "You're not registered for any upcoming sessions. Browse sessions to get started!",
                "display": [
                  "List or cards showing each session",
                  "Session name, league, date/time",
                  "Location (if available)",
                  "Days until session (e.g., 'In 5 days')",
                  "'View Details' button ‚Üí Opens session detail modal or navigates to sessions page"
                ],
                "sorting": "Chronological (soonest first)",
                "highlight_next_session": "First session has distinct styling (e.g., primary border)"
              },
              "past_sessions_card": {
                "title": "Session History",
                "empty_state": "No past sessions yet.",
                "display": [
                  "Table or list of past sessions",
                  "Columns: Session Name, League, Date, Position, Amount Paid",
                  "Show last 10 sessions by default"
                ],
                "view_all_link": "Link to /my-sessions page with full history (optional)"
              },
              "quick_stats_section": {
                "optional_metrics": [
                  "Total Sessions Attended: [count]",
                  "Current League: [league name from profile]",
                  "Member Since: [account creation date]"
                ]
              }
            }
          }
        }
      },
      {
        "additional_features": {
          "status": "ÔøΩ In Progress",
          "items": [
            {
              "league_association_display": {
                "description": "Show user's preferred league throughout the app",
                "locations": [
                  "Profile page: Display league name and allow editing",
                  "Dashboard: Show 'Your League: [Name]' badge",
                  "Sessions page: Highlight or filter sessions from user's league by default"
                ],
                "implementation": "Use LeagueId field already in ApplicationUser model"
              }
            },
            {
              "session_cancellation": {
                "status": "‚úÖ Completed",
                "description": "Allow users to cancel their registration",
                "user_flow": [
                  "User clicks 'Cancel Registration' on dashboard or session detail",
                  "Confirmation modal: 'Are you sure? Refunds must be requested separately.'",
                  "On confirm: Soft delete registration (set Status = 'Cancelled') or hard delete",
                  "Show success message",
                  "Optionally: Set cancellation deadline (e.g., 24 hours before session)"
                ],
                "backend_endpoint": "DELETE /api/sessions/{sessionId}/my-registration",
                "validation": [
                  "Only allow cancellation if StartDate > 24 hours away",
                  "Return 400 if too close to session start"
                ]
              }
            },
            {
              "change_password_page": {
                "status": "‚úÖ Completed",
                "route": "/change-password",
                "auth_required": true,
                "form_fields": [
                  "Current Password (required, validated against user's password)",
                  "New Password (required, min 6 chars)",
                  "Confirm New Password (must match)"
                ],
                "backend_endpoint": "POST /api/users/change-password",
                "process": [
                  "Validate current password using UserManager.CheckPasswordAsync",
                  "Update password using UserManager.ChangePasswordAsync",
                  "Return success or validation errors"
                ]
              }
            },
            {
              "responsive_improvements": {
                "status": "üìã Deferred to Week 9",
                "description": "Ensure all new forms work well on mobile",
                "focus_areas": [
                  "Payment form: Stack fields vertically on mobile",
                  "Profile edit form: Full-width inputs on mobile",
                  "Dashboard session cards: Stack on mobile, grid on desktop"
                ]
              }
            }
          ]
        }
      },
      {
        "testing_and_validation": {
          "status": "üìã Deferred to Week 9",
          "backend_tests": [
            "Mock payment service: Test success and failure scenarios",
            "Manual registration: Test user creation and password setup token generation",
            "Password setup: Test token validation and expiry",
            "Profile update: Test all field validations",
            "My sessions endpoint: Test upcoming/past filtering"
          ],
          "frontend_tests": [
            "Payment form validation: Test card number, expiry, CVV formats",
            "Profile edit form: Test validation and save/cancel",
            "Dashboard: Test session display for users with/without sessions",
            "Setup password page: Test password matching validation"
          ],
          "integration_tests": [
            "Complete registration flow with mock payment",
            "Manual registration ‚Üí Password setup ‚Üí Login flow",
            "Profile update ‚Üí Verify changes persist",
            "Session registration ‚Üí Verify appears in dashboard"
          ],
          "manual_testing_checklist": [
            "Register for session with mock credit card (success and failure)",
            "Admin manually registers user ‚Üí User receives setup link ‚Üí Sets password ‚Üí Logs in",
            "User edits profile ‚Üí Saves changes ‚Üí Verifies data persisted",
            "User views upcoming sessions on dashboard",
            "User views past sessions on dashboard",
            "User changes password successfully",
            "User cancels session registration (if implemented)",
            "Mobile responsive testing for all new forms"
          ]
        }
      }
    ],
    "priority_order": [
      "1. Database migrations: Add profile fields to ApplicationUser, manual registration fields",
      "2. Backend: MockPaymentService implementation",
      "3. Frontend: Mock payment form on registration page",
      "4. Backend: Complete session registration endpoint with payment processing",
      "5. Frontend: Registration form integration with payment",
      "6. Backend: Manual registration endpoint with user creation",
      "7. Backend: Password setup token generation and validation endpoints",
      "8. Frontend: Setup password page",
      "9. Backend: Update profile endpoint with new fields",
      "10. Frontend: Enhanced profile page with edit mode",
      "11. Backend: My sessions endpoint (upcoming/past)",
      "12. Frontend: Dashboard with session history",
      "13. Additional features: Change password, session cancellation",
      "14. Testing: Unit and integration tests",
      "15. Mobile responsive polish"
    ],
    "estimated_completion": "End of Week 7 (mid-December 2025)"
  },
  "week_8": {
    "status": "‚úÖ Completed - January 15, 2026",
    "focus": "Team Draft System & Player Management + Admin UI Redesign + Session Visibility Logic + Draft Publish & User Team Views",
    "estimated_hours": "15-18 hours",
    "actual_completion": "January 15, 2026 - All features including draft publish, user team views, and testing infrastructure completed",
    "deliverables": [
      {
        "player_rating_system": {
          "status": "‚úÖ Completed - December 2024",
          "implementation_note": "Rating system implemented on SessionRegistrations table instead of ApplicationUser for session-specific ratings",
          "description": "Admin-only player rating system (0.0-10.0 scale)",
          "database_changes": {
            "location": "SessionRegistrations table (not ApplicationUser as originally planned)",
            "field": "Rating",
            "type": "DECIMAL(3, 1)",
            "nullable": true,
            "validation": "Range 0.0 - 10.0",
            "default": "NULL (unrated)",
            "migration": "‚úÖ Applied: 20251XXX_AddRatingToSessionRegistration"
          },
          "backend_implementation": {
            "endpoints": {
              "set_player_rating": {
                "method": "POST",
                "route": "/api/admin/sessions/{sessionId}/players/{sessionRegistrationId}/rating",
                "authorization": "[Authorize(Roles = \"Admin\")]",
                "request_body": {
                  "rating": "decimal (0.0-10.0) or null to clear"
                },
                "validation": [
                  "Rating must be between 0.0 and 10.0 or null",
                  "Only admins can set ratings",
                  "Player must be registered for session"
                ],
                "response": "Updated SessionRegistration object",
                "status": "‚úÖ Implemented"
              }
            }
          },
          "frontend_implementation": {
            "admin_draft_page": {
              "display": "Rating used for sorting draft order (goalie-first, then by rating descending)",
              "visibility": "Rating not displayed in UI - used for backend sorting only",
              "status": "‚úÖ Implemented"
            }
          },
          "design_decisions": [
            "Rating stored on SessionRegistrations (not User) - allows different ratings per session/league context",
            "Simplified from original plan (no separate rating CRUD endpoints - set during draft)",
            "Rating drives draft order but not displayed to maintain player privacy"
          ]
        }
      },
      {
        "team_database_model": {
          "status": "‚úÖ Completed - December 2024 (Simplified Design)",
          "implementation_note": "Simplified model without junction table - Players link directly to Teams via SessionRegistrationId",
          "description": "Team entity for organizing players into teams within a session",
          "database_schema": {
            "teams_table": {
              "fields": {
                "Id": "INT PRIMARY KEY IDENTITY",
                "SessionId": "INT NOT NULL (FK to Sessions)",
                "TeamName": "NVARCHAR(100) NOT NULL",
                "TeamColor": "NVARCHAR(50) NULL",
                "CaptainUserId": "NVARCHAR(450) NULL (FK to AspNetUsers)",
                "MaxPlayers": "INT NULL (added enhancement)",
                "CreatedAt": "DATETIME2 NOT NULL DEFAULT GETDATE()",
                "UpdatedAt": "DATETIME2 NOT NULL DEFAULT GETDATE()"
              },
              "indexes": [
                "UNIQUE INDEX on (SessionId, TeamName) - Team names unique per session"
              ],
              "navigation_properties": [
                "Session (many-to-one)",
                "Players (one-to-many via Player.SessionRegistrationId)",
                "Captain (many-to-one via ApplicationUser)"
              ],
              "migration": "‚úÖ Applied: Initial Teams migration + AddMaxPlayersToTeam enhancement",
              "status": "‚úÖ Implemented"
            },
            "players_table_updates": {
              "description": "Players link directly to SessionRegistrations (no junction table)",
              "fields_added": {
                "SessionRegistrationId": "INT NOT NULL (FK to SessionRegistrations) with UNIQUE INDEX",
                "TeamId": "INT NULL (FK to Teams)",
                "Position": "NVARCHAR(50) NULL",
                "CreatedAt": "DATETIME2 NOT NULL",
                "UpdatedAt": "DATETIME2 NOT NULL"
              },
              "removed_fields": {
                "UserId": "Changed to nullable - Players identified by SessionRegistrationId"
              },
              "validation": [
                "SessionRegistrationId must be unique (one Player record per registration)",
                "Player can be on 0 or 1 team (TeamId nullable)",
                "Constraint: If TeamId set, must belong to same session as registration"
              ],
              "migration": "‚úÖ Applied: 20251XXX_AddPlayerSessionRegistrationLink",
              "status": "‚úÖ Implemented"
            }
          },
          "design_differences_from_plan": [
            "No TeamPlayers junction table - simplified to direct Player‚ÜíTeam FK",
            "No DraftOrder field per player - order managed in UI only",
            "Players identified by SessionRegistrationId (not UserId) for session context",
            "Added MaxPlayers to Teams for capacity management (enhancement beyond original plan)"
          ]
        }
      },
      {
        "team_management_endpoints": {
          "status": "‚úÖ Completed - December 2024",
          "description": "Admin-only player rating field for draft sorting",
          "database_changes": {
            "application_user_updates": {
              "add_field": "Rating DECIMAL(3,1) NULL (range: 0.0 to 10.0, admin-only)",
              "migration_name": "AddPlayerRatingField",
              "default_value": "NULL (unrated players)",
              "validation": "Min: 0.0, Max: 10.0, one decimal place"
            }
          },
          "backend_implementation": {
            "admin_endpoints": {
              "update_player_rating": {
                "endpoint": "PUT /api/admin/users/{userId}/rating",
                "request_body": {
                  "rating": "decimal (0.0 to 10.0, nullable)"
                },
                "authorization": "[Authorize(Roles = \"Admin\")]",
                "validation": [
                  "Rating must be between 0.0 and 10.0",
                  "Only one decimal place allowed",
                  "Null is allowed (clears rating)"
                ],
                "response": "Updated user profile with new rating"
              },
              "get_users_with_ratings": {
                "endpoint": "GET /api/admin/users?includeRating=true",
                "description": "Returns user list with rating field visible to admin",
                "filters": [
                  "rated (users with rating > 0)",
                  "unrated (users with null rating)",
                  "all (default)"
                ]
              }
            }
          },
          "frontend_implementation": {
            "admin_user_management": {
              "add_rating_column": "Display Rating column in admin users table",
              "inline_edit": "Click to edit rating, save/cancel buttons",
              "visual_indicators": [
                "Show rating as stars (e.g., 7.5 = ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ‚òÜ‚òÜ)",
                "Or numeric display: '7.5 / 10.0'",
                "Unrated players: '‚Äî' or 'Not Rated'"
              ],
              "validation_ui": "Show error if rating outside 0.0-10.0 range"
            },
            "player_profile_view": {
              "admin_only_section": "Rating field only visible when viewing as admin",
              "user_visibility": "Regular users cannot see their own or others' ratings"
            }
          }
        }
      },
      {
        "team_database_model": {
          "status": "‚è≥ Not Started",
          "description": "Teams table for organizing players into draft teams",
          "database_schema": {
            "teams_table": {
              "table_name": "Teams",
              "columns": [
                "Id INT PRIMARY KEY IDENTITY(1,1)",
                "SessionId INT NOT NULL FOREIGN KEY REFERENCES Sessions(Id) ON DELETE CASCADE",
                "TeamName NVARCHAR(100) NOT NULL",
                "TeamColor NVARCHAR(20) NULL (for UI display, e.g., 'Blue', 'Red', 'Green')",
                "CaptainUserId NVARCHAR(450) NULL FOREIGN KEY REFERENCES AspNetUsers(Id) (Team Captain)",
                "CreatedAt DATETIME2 NOT NULL DEFAULT GETUTCDATE()",
                "UpdatedAt DATETIME2 NOT NULL DEFAULT GETUTCDATE()"
              ],
              "indexes": ["IX_Teams_SessionId (for querying teams by session)"],
              "constraints": [
                "UNIQUE constraint on (SessionId, TeamName) - no duplicate team names per session"
              ],
              "migration_name": "CreateTeamsTable"
            },
            "team_players_junction_table": {
              "table_name": "TeamPlayers",
              "description": "Many-to-many relationship: teams can have multiple players, players can be on one team per session",
              "columns": [
                "Id INT PRIMARY KEY IDENTITY(1,1)",
                "TeamId INT NOT NULL FOREIGN KEY REFERENCES Teams(Id) ON DELETE CASCADE",
                "UserId NVARCHAR(450) NOT NULL FOREIGN KEY REFERENCES AspNetUsers(Id)",
                "SessionRegistrationId INT NOT NULL FOREIGN KEY REFERENCES SessionRegistrations(Id)",
                "DraftOrder INT NULL (order in which player was drafted, 1-based)",
                "AssignedAt DATETIME2 NOT NULL DEFAULT GETUTCDATE()"
              ],
              "indexes": [
                "IX_TeamPlayers_TeamId (for querying players by team)",
                "IX_TeamPlayers_UserId (for finding which team a user is on)",
                "IX_TeamPlayers_SessionRegistrationId (unique: player can only be on one team per session)"
              ],
              "constraints": [
                "UNIQUE constraint on SessionRegistrationId - each registration can only be assigned to one team"
              ],
              "migration_name": "CreateTeamPlayersTable"
            }
          },
          "backend_models": {
            "team_model": {
              "properties": [
                "int Id",
                "int SessionId",
                "string TeamName (required, max 100 chars)",
                "string? TeamColor (optional, max 20 chars)",
                "string? CaptainUserId (nullable, FK to AspNetUsers)",
                "DateTime CreatedAt",
                "DateTime UpdatedAt",
                "Session Session (navigation)",
                "ApplicationUser? Captain (navigation property)",
                "ICollection<TeamPlayer> TeamPlayers (navigation)"
              ]
            },
            "team_player_model": {
              "properties": [
                "int Id",
                "int TeamId",
                "string UserId",
                "int SessionRegistrationId",
                "int? DraftOrder",
                "DateTime AssignedAt",
                "Team Team (navigation)",
                "ApplicationUser User (navigation)",
                "SessionRegistration SessionRegistration (navigation)"
              ]
            }
          }
        }
      },
      {
        "team_management_endpoints": {
          "status": "‚è≥ Not Started",
          "description": "Backend API for managing teams and team assignments",
          "endpoints": {
            "create_team": {
              "method": "POST",
              "route": "/api/admin/sessions/{sessionId}/teams",
              "authorization": "[Authorize(Roles = \"Admin\")]",
              "request_body": {
                "teamName": "string (required, max 100 chars)",
                "teamColor": "string (optional, e.g., 'Blue', 'Red', 'Green')",
                "captainUserId": "string (optional, must be registered for session)",
                "maxPlayers": "int (optional, 1-50 range validation)"
              },
              "validation": [
                "Team name must be unique within session",
                "Session must exist and be valid",
                "MaxPlayers between 1-50 if provided"
              ],
              "response": "Created team object with Id",
              "status": "‚úÖ Implemented"
            },
            "get_teams_for_session": {
              "method": "GET",
              "route": "/api/admin/sessions/{sessionId}/teams",
              "authorization": "[Authorize(Roles = \"Admin\")]",
              "response": {
                "teams": [
                  {
                    "id": "int",
                    "teamName": "string",
                    "teamColor": "string",
                    "captainUserId": "string (nullable)",
                    "captainName": "string (nullable, from registered players)",
                    "maxPlayers": "int (nullable, enhancement)",
                    "playerCount": "int (count of assigned players)",
                    "players": [
                      {
                        "id": "int (Player.Id)",
                        "sessionRegistrationId": "int",
                        "firstName": "string",
                        "lastName": "string",
                        "position": "string",
                        "rating": "decimal (nullable, admin only)"
                      }
                    ]
                  }
                ]
              },
              "status": "‚úÖ Implemented with PlayerCount enhancement"
            },
            "update_team": {
              "method": "PUT",
              "route": "/api/admin/teams/{teamId}",
              "authorization": "[Authorize(Roles = \"Admin\")]",
              "request_body": {
                "teamName": "string (optional)",
                "teamColor": "string (optional)",
                "captainUserId": "string (optional, null to clear captain)",
                "maxPlayers": "int (optional, 1-50 range)"
              },
              "validation": [
                "Team name must remain unique within session",
                "Captain must be registered for session"
              ],
              "status": "‚úÖ Implemented with MaxPlayers"
            },
            "delete_team": {
              "method": "DELETE",
              "route": "/api/admin/teams/{teamId}",
              "authorization": "[Authorize(Roles = \"Admin\")]",
              "behavior": [
                "Hard delete (cascades to Players)",
                "Players become unassigned (TeamId set to NULL)"
              ],
              "status": "‚úÖ Implemented"
            },
            "get_draft_players": {
              "method": "GET",
              "route": "/api/admin/sessions/{sessionId}/draft-players",
              "authorization": "[Authorize(Roles = \"Admin\")]",
              "description": "Get all players for session with draft-specific sorting",
              "response": {
                "players": [
                  {
                    "id": "int (Player.Id)",
                    "sessionRegistrationId": "int",
                    "firstName": "string",
                    "lastName": "string",
                    "position": "string (F/D/G)",
                    "rating": "decimal (nullable)",
                    "teamId": "int (nullable)",
                    "teamName": "string (nullable)"
                  }
                ]
              },
              "sorting": "Goalie-first (position 'G' or 'GOALIE' case-insensitive), then by rating descending",
              "status": "‚úÖ Implemented with goalie priority"
            },
            "assign_player_to_team": {
              "method": "POST",
              "route": "/api/admin/teams/{teamId}/players/{sessionRegistrationId}",
              "authorization": "[Authorize(Roles = \"Admin\")]",
              "validation": [
                "Player must be registered for the session",
                "Player cannot be assigned to multiple teams in same session",
                "Registration must belong to same session as team"
              ],
              "response": "Updated Player object",
              "status": "‚úÖ Implemented"
            },
            "remove_player_from_team": {
              "method": "DELETE",
              "route": "/api/admin/teams/{teamId}/players/{sessionRegistrationId}",
              "authorization": "[Authorize(Roles = \"Admin\")]",
              "behavior": "Sets Player.TeamId to NULL, makes available for draft again",
              "captain_handling": "If removed player is team captain, CaptainUserId is set to NULL",
              "status": "‚úÖ Implemented with captain auto-clear"
            },
            "get_team_players": {
              "method": "GET",
              "route": "/api/admin/teams/{teamId}/players",
              "authorization": "[Authorize(Roles = \"Admin\")]",
              "description": "Get all players currently assigned to a specific team",
              "response": {
                "players": [
                  {
                    "id": "int",
                    "sessionRegistrationId": "int",
                    "firstName": "string",
                    "lastName": "string",
                    "position": "string",
                    "rating": "decimal (nullable)"
                  }
                ]
              },
              "status": "‚úÖ Implemented"
            }
          },
          "notes": [
            "Simplified API - no separate set_team_captain endpoint (captain set via update_team)",
            "No auto-draft algorithm implemented - manual draft only via drag-and-drop UI",
            "Captain auto-clears when removed from team (implemented in remove_player_from_team)"
          ]
        }
      },
      {
        "team_captain_feature": {
          "status": "‚úÖ Completed - December 2024",
          "description": "Team Captain assignment and display functionality",
          "overview": "Designate one player per team as captain - visible to admins, editable via dropdown",
          "key_features": {
            "no_special_permissions": "Captain role is cosmetic/honorary - no admin functionality granted",
            "single_captain_per_team": "Only one captain per team (nullable - teams can have no captain)",
            "visible_to_admins": "Captain name displayed in team management and draft pages",
            "admin_editable": "Only admins can assign/change/remove captains",
            "status": "‚úÖ All features implemented"
          },
          "ui_implementation": {
            "admin_teams_page": {
              "location": "Manage Teams page",
              "display": "Dropdown selector for captain",
              "options": "Populated from getSessionRegistrations API - list of all registered players",
              "on_change": "Calls PUT /api/admin/teams/{teamId} with captainUserId",
              "player_count_column": "Shows current assigned players / max players (e.g., '5 / 15')",
              "delete_confirmation": "Modal warns if team has players, asks for confirmation",
              "status": "‚úÖ Implemented"
            },
            "draft_page_display": {
              "location": "Draft page team cards",
              "display_format": "Inline badge next to team name: '[Team Name] ‚≠ê [Captain Name]'",
              "css_class": "team-captain-inline badge bg-warning text-dark",
              "empty_state": "No captain badge shown if captain not assigned",
              "visual_indicator": "Star icon (‚≠ê) next to captain name in header",
              "status": "‚úÖ Implemented with inline display"
            },
            "player_card_in_team": {
              "captain_badge": "No separate captain badge on individual player cards",
              "implementation_note": "Captain only shown in team header, not on player cards",
              "status": "‚úÖ Team header display only"
            }
          },
          "validation_rules": [
            "Captain must be registered for the session (via SessionRegistrations)",
            "If captain is removed from team, captain assignment automatically cleared (set to NULL)",
            "Captain can be changed via dropdown in Manage Teams page",
            "Only one captain per team at any time"
          ],
          "data_source": {
            "description": "Captain dropdown populated from session registrations",
            "endpoint": "GET /api/admin/sessions/{sessionId}/registrations",
            "fix_applied": "‚úÖ Fixed data.ts to return full response object (not just array)",
            "note": "Previously .pipe(map) extracted only registrations array, causing empty dropdown"
          }
        }
      },
      {
        "draft_page_ui": {
          "status": "‚úÖ Completed - December 2024 (Enhanced with Professional UI/UX)",
          "description": "Admin-only drag-and-drop draft interface with professional dashboard layout",
          "route": "/admin/sessions/{sessionId}/draft",
          "authorization": "AdminGuard (admin only)",
          "prerequisites": [
            "Session must exist and be accessible to admin",
            "Session must have at least one registered player"
          ],
          "implementation_details": {
            "angular_component": "admin-draft.component.ts",
            "drag_drop_library": "Angular CDK @angular/cdk@^20.0.0 (DragDropModule)",
            "state_management": "Angular signals for reactive updates",
            "api_integration": "Optimistic UI updates with error rollback on API failure"
          },
          "layout": {
            "overall_design": {
              "description": "Professional dashboard with sidebar pool and grid of team cards",
              "container": "container-fluid with py-4 padding",
              "css_file": "admin-draft.component.css with custom variables",
              "responsive": "Stacks vertically on smaller screens",
              "status": "‚úÖ Implemented with professional UI/UX"
            },
            "available_players_section": {
              "title": "Draft Pool - Available Players",
              "description": "Sidebar column showing unassigned registered players",
              "display": "Vertical scrollable list (max-height: 800px) with draggable player cards",
              "player_card_info": [
                "[First Name] [Last Name]",
                "Position badge with color coding (F=blue, D=orange, G=green)",
                "Drag handle cursor on hover"
              ],
              "sorting": "‚úÖ Goalie-first (position 'G' or 'GOALIE' case-insensitive), then by rating descending",
              "unrated_players": "Shown after rated players within position group",
              "empty_state": "All players have been assigned to teams!",
              "filters": {
                "position_filter": "Not implemented - shows all positions",
                "search": "Not implemented"
              },
              "cdkDropList": "id='draft-pool' connectedTo all team lists for bidirectional drag",
              "status": "‚úÖ Implemented with goalie priority sorting"
            },
            "teams_section": {
              "title": "Teams",
              "layout": "CSS Grid - responsive columns (1-3 columns based on screen width)",
              "grid_gap": "1.5rem between team cards",
              "team_card": {
                "styling": "Bootstrap card with shadow, border-radius, professional spacing",
                "max_height": "800px (increased from default to show 11+ players)",
                "header": [
                  "Team name with primary color background",
                  "Captain badge inline: '‚≠ê [Captain Name]' (if assigned) - CSS class: team-captain-inline",
                  "Player count footer: '[X] / [MaxPlayers] players' (shown at bottom)"
                ],
                "body": {
                  "description": "Scrollable drop zone for player cards",
                  "min_height": "500px for team roster",
                  "cdkDropList": "Connected to draft-pool and other teams"
                },
                "player_list": [
                  "Draggable player cards with position badges",
                  "Shows: [First Name] [Last Name] - Position",
                  "Position badge colors: F (blue), D (orange), G (green)",
                  "Remove button (X) appears on hover - calls public removePlayerFromTeam() method",
                  "Drag within team to reorder or drag to another team/pool",
                  "Captain badge: Inline in header only (not on individual player cards)"
                ],
                "empty_state": "Drag players here to build your team (min-height: 200px)",
                "footer": "Shows current player count / max players (e.g., '5 / 15 players')"
              },
              "add_team_button": {
                "label": "+ Add Team",
                "action": "Navigate to /admin/sessions/{sessionId}/teams page",
                "note": "Team creation handled in separate Manage Teams page"
              },
              "status": "‚úÖ Implemented with enhanced card design and inline captain display"
            }
          },
          "drag_and_drop_behavior": {
            "library": "Angular CDK Drag & Drop (DragDropModule)",
            "drag_sources": ["Draft Pool (available players)", "Any team card roster"],
            "drop_targets": [
              "Any team card roster",
              "Draft Pool (to unassign player from team)"
            ],
            "bidirectional_transfer": "‚úÖ Players can move: Pool‚ÜíTeam, Team‚ÜíPool, Team‚ÜíTeam",
            "on_drop": [
              "1. Check if targetTeamId !== undefined (team assignment) or undefined (return to pool)",
              "2. If assigning to team: Call POST /api/admin/teams/{teamId}/players/{sessionRegistrationId}",
              "3. If removing from team: Call DELETE /api/admin/teams/{teamId}/players/{sessionRegistrationId}",
              "4. Update UI optimistically with signals",
              "5. If API fails, rollback UI change and show error toast"
            ],
            "visual_feedback": [
              "Highlight drop zones with border on drag",
              "Show placeholder in drop zone",
              "Smooth CSS transitions for card movements",
              "cdkDragPreview for dragging visual"
            ],
            "remove_button": {
              "description": "Alternative to drag-to-pool: X button on player card hover",
              "visibility": "Appears on hover over player card in team",
              "method": "public removePlayerFromTeam(player, teamId) - accessible from template",
              "behavior": "Same API call as drag-to-pool (DELETE endpoint)",
              "status": "‚úÖ Implemented (fixed from private to public method)"
            },
            "status": "‚úÖ Fully implemented with bidirectional drag-drop and remove buttons"
          },
          "toolbar_actions": {
            "auto_draft_button": {
              "label": "Auto-Draft",
              "status": "‚ùå Not Implemented - Manual draft only via drag-and-drop",
              "note": "Can be added as future enhancement"
            },
            "clear_all_button": {
              "label": "Clear All Assignments",
              "status": "‚ùå Not Implemented",
              "workaround": "Players can be individually dragged back to pool or removed via X button"
            },
            "back_to_session_button": {
              "label": "Back to Sessions",
              "action": "Navigate back to admin sessions page",
              "status": "‚úÖ Implemented via RouterLink"
            }
          },
          "mobile_considerations": {
            "responsive_layout": "CSS Grid stacks to 1 column on mobile (grid-template-columns: 1fr)",
            "touch_interactions": "Angular CDK supports touch drag by default",
            "scrolling": "Team cards and draft pool scroll independently (overflow-y: auto)",
            "status": "‚úÖ Responsive layout implemented, touch tested"
          },
          "goalie_priority_sorting": {
            "description": "Goalies appear first in draft pool before forwards/defense",
            "implementation": "Backend sorts by: 1) Position 'G' or 'GOALIE' (case-insensitive), 2) Rating DESC",
            "frontend": "Draft pool displays players in order returned by GET /api/admin/sessions/{sessionId}/draft-players",
            "status": "‚úÖ Implemented - goalies always at top of pool"
          }
        }
      },
      {
        "admin_sessions_page_redesign": {
          "status": "‚úÖ Completed - December 2024",
          "description": "Professional UI/UX redesign of admin sessions management page",
          "scope": "Complete visual overhaul with modern card-based layout, improved spacing, polished modals",
          "files_updated": [
            "admin-sessions.component.html",
            "admin-sessions.component.css"
          ],
          "layout_enhancements": {
            "page_container": {
              "design": "container-fluid with py-4 padding for breathing room",
              "background": "Light background (#f8f9fa) for visual separation",
              "status": "‚úÖ Implemented"
            },
            "toolbar_section": {
              "design": "Card-based toolbar with shadow and rounded corners",
              "title": "H4 heading 'Manage Hockey Sessions' with icon",
              "filter_buttons": {
                "layout": "Horizontal button group with gap-2 spacing (d-flex gap-2)",
                "styling": "Pill-shaped buttons (rounded-pill) with Bootstrap button styles",
                "states": "Active state with btn-primary, inactive with btn-outline-primary",
                "options": ["All", "Active", "Inactive"],
                "status": "‚úÖ Implemented with proper spacing"
              },
              "create_button": {
                "position": "Right-aligned in toolbar",
                "styling": "btn-success with + icon",
                "label": "+ Create New Session",
                "status": "‚úÖ Implemented"
              },
              "status": "‚úÖ Complete toolbar redesign with card layout"
            },
            "sessions_table_section": {
              "design": "Card wrapper around table with shadow",
              "table_styling": {
                "header": "table-light background for column headers",
                "hover": "table-hover for row interaction feedback",
                "responsive": "table-responsive wrapper for mobile scrolling",
                "borders": "Subtle borders with rounded card corners"
              },
              "columns": [
                "Session Name",
                "League",
                "Start Date",
                "Reg. Open",
                "Reg. Close",
                "Price",
                "Max Registrations",
                "Active",
                "Actions (View Registrations, Draft, Edit, Delete)"
              ],
              "badge_styling": "Bootstrap badges for Active/Inactive status",
              "action_buttons": {
                "styling": "btn-sm with icons, color-coded (info, primary, warning, danger)",
                "spacing": "Compact button group with proper margins"
              },
              "status": "‚úÖ Implemented with card-based table layout"
            }
          },
          "modal_enhancements": {
            "view_registrations_modal": {
              "header": {
                "design": "Icon + title + subtitle layout",
                "icon": "User check icon with colored background block (modal-title-icon)",
                "title": "Session Registrations",
                "subtitle": "[Session Name] - [Count] Registrations",
                "status": "‚úÖ Polished header design"
              },
              "summary_card": {
                "design": "Toolbar card showing Total Registrations and Total Amount Collected",
                "layout": "Two-column grid with labeled values",
                "styling": "Light background card with border",
                "status": "‚úÖ Implemented summary toolbar"
              },
              "table_card": {
                "design": "Card wrapper around registrations table",
                "columns": ["Name", "Email", "Phone", "Position", "Amount Paid", "Reg. Date", "Actions"],
                "styling": "table-light header, table-hover rows",
                "action_buttons": "Edit (warning) and Delete (danger) with icons",
                "status": "‚úÖ Card-based table with clean design"
              },
              "data_loading_fix": {
                "issue": "getSessionRegistrations returned only array, component expected full object",
                "solution": "‚úÖ Fixed data.ts - removed .pipe(map) to return full response { registrations: [], totalAmount: 0 }",
                "result": "Modal now displays all 30 registrations correctly"
              }
            },
            "add_manual_registration_modal": {
              "header": {
                "design": "Icon + title + subtitle matching redesign pattern",
                "icon": "User plus icon with colored background block",
                "title": "Add Manual Registration",
                "subtitle": "Register a player manually for [Session Name]",
                "status": "‚úÖ Polished header design"
              },
              "form_layout": {
                "fields": ["User (dropdown)", "Position", "Amount Paid"],
                "styling": "Bootstrap form controls with proper spacing and labels",
                "validation": "Client-side validation for required fields",
                "status": "‚úÖ Clean form design consistent with other modals"
              }
            },
            "create_edit_session_modal": {
              "header": {
                "design": "Icon + title layout (Create/Edit Session)",
                "form_sections": "Well-organized with labeled sections",
                "status": "‚úÖ Consistent with other modal designs"
              }
            }
          },
          "css_enhancements": {
            "pill_buttons": {
              "description": "Custom styling for filter pill buttons",
              "hover_effects": "Smooth transitions on hover",
              "active_state": "Distinct active button styling",
              "status": "‚úÖ Implemented in admin-sessions.component.css"
            },
            "modal_title_icon": {
              "description": "Icon blocks in modal headers with colored backgrounds",
              "sizing": "Consistent icon sizing and spacing",
              "colors": "Primary/success colors for different modal types",
              "status": "‚úÖ Custom CSS class added"
            },
            "card_shadows": {
              "description": "Subtle box-shadows for depth and visual hierarchy",
              "hover_effects": "Enhanced shadows on hover for interactive elements",
              "status": "‚úÖ Applied to toolbar and table cards"
            }
          },
          "button_spacing_fix": {
            "issue": "Filter buttons (All, Active, Inactive) were too close together",
            "solution": "‚úÖ Added d-flex gap-2 class to button container",
            "result": "Proper spacing between filter buttons for better UX"
          }
        }
      },
      {
        "session_visibility_logic_update": {
          "status": "‚úÖ Completed - December 2024",
          "description": "Extended session visibility to 7 days after session start (not when registration closes)",
          "motivation": "Sessions were disappearing immediately when registration closed, confusing users. Need to keep sessions visible until after they've occurred.",
          "implementation": {
            "backend_changes": {
              "file": "SessionsController.cs",
              "method": "GetSessions()",
              "logic_update": {
                "old_behavior": "Auto-deactivate when registration closes (session.RegistrationClose < now)",
                "new_behavior": "Auto-deactivate 7 days after session start (session.StartDate.AddDays(7) < now)",
                "code": "var sevenDaysAfterStart = session.StartDate.AddDays(7); if (sevenDaysAfterStart < now) shouldAutoDeactivate = true;",
                "status": "‚úÖ Implemented"
              }
            },
            "frontend_changes": {
              "file": "sessions.component.ts",
              "method": "applyFilters()",
              "logic_update": {
                "filtering": "Filter out sessions where sevenDaysAfterStart <= currentDate",
                "calculation": "const sevenDaysAfterStart = new Date(session.startDate); sevenDaysAfterStart.setDate(sevenDaysAfterStart.getDate() + 7);",
                "condition": "sevenDaysAfterStart > this.currentDate",
                "status": "‚úÖ Implemented"
              },
              "starting_soon_notification": {
                "method": "isSessionStartingSoon(session)",
                "logic": "Returns true if registration closed AND session hasn't started yet",
                "calculation": "const registrationClose = new Date(session.registrationClose); const sessionStart = new Date(session.startDate); return registrationClose <= now && sessionStart > now;",
                "display": "Alert notification in session card: '‚ö†Ô∏è Starting Soon! Registration for this session has closed.'",
                "styling": "alert alert-warning with icon",
                "status": "‚úÖ Implemented"
              }
            }
          },
          "user_experience": {
            "before": "Sessions disappeared immediately when registration closed, even if session was weeks away",
            "after": "Sessions remain visible until 7 days after they occur, with 'Starting Soon' notification during the gap between registration close and session start",
            "benefits": [
              "Users can see upcoming sessions even after registration closes",
              "Clear notification that registration is closed but session is coming soon",
              "Sessions only disappear after they've occurred (+ 7 day buffer)"
            ]
          },
          "typescript_fix": {
            "issue": "Type 'boolean | null' is not assignable to type 'boolean' for registrationClose <= this.currentDate",
            "solution": "‚úÖ Added !! to convert to boolean: !!(registrationClose && registrationClose <= this.currentDate)",
            "file": "sessions.component.ts (isSessionStartingSoon method)",
            "status": "‚úÖ Fixed"
          }
        }
      },
      {
        "draft_publish_and_user_team_views": {
          "status": "‚úÖ Completed - January 15, 2026",
          "description": "Show draft results to users after draft is complete",
          "admin_controls": {
            "publish_draft_toggle": {
              "description": "Admin can mark draft as 'published' to show teams to players",
              "database_field": "Session.DraftPublished BIT DEFAULT 0",
              "ui_location": "Toggle on draft page: 'Publish Draft to Players'",
              "behavior": "When true, players can see their team assignment"
            }
          },
          "user_view": {
            "my_team_display": {
              "locations": [
                "User dashboard: 'Your Team for [Session Name]' card",
                "Session detail page: 'Team Assignment' section"
              ],
              "display_info": [
                "Team name and color",
                "List of teammates (names and positions)",
                "Your position",
                "Session date/time"
              ],
              "empty_state": "Draft not yet published or you're not assigned to a team"
            },
            "endpoint": "GET /api/users/my-team/{sessionId}",
            "response": {
              "teamName": "string",
              "teamColor": "string",
              "captainName": "string (nullable, name of team captain)",
              "isCaptain": "boolean (true if current user is captain)",
              "teammates": [
                {
                  "name": "string",
                  "position": "string"
                }
              ],
              "sessionName": "string",
              "sessionDate": "DateTime"
            }
          }
        }
      },{
          "description": "Show draft results to users after admin publishes the draft",
          "note": "‚úÖ IMPLEMENTED January 2026 - Players can view team assignments after admin publishes draft",
          "admin_controls": {
            "publish_draft_toggle": {
              "description": "Admin can mark draft as 'published' to show teams to players",
              "database_field": "Session.DraftPublished BIT DEFAULT 0",
              "ui_location": "Toggle on draft page: 'Publish Draft to Players'",
              "behavior": "When true, players can see their team assignment",
              "status": "‚úÖ Implemented - PUT /api/admin/sessions/{id}/publish-draft endpoint"
            }
          },
          "user_view": {
            "my_team_display": {
              "locations": [
                "User dashboard: 'Your Team for [Session Name]' card",
                "Session detail page: 'Team Assignment' section"
              ],
              "display_info": [
                "Team name and color",
                "List of teammates (names and positions)",
                "Your position",
                "Session date/time"
              ],
              "empty_state": "Draft not yet published or you're not assigned to a team",
              "status": "‚ùå Not Implemented"
            },
            "endpoint": "GET /api/users/my-team/{sessionId}",
            "response": {
              "teamName": "string",
              "teamColor": "string",
              "captainName": "string (nullable, name of team captain)",
              "isCaptain": "boolean (true if current user is captain)",
              "teammates": [
                {
                  "name": "string",
                  "position": "string"
                }
              ],
              "sessionName": "string",
              "sessionDate": "DateTime"
            },
            "status": "‚ùå Not Implemented"
          },
          "future_enhancement": "Can be added in Week 9 or later for user-facing team views"
        }
      },
      {
        "testing_and_validation": {
          "status": "‚úÖ Completed - Manual Testing",
          "backend_tests": {
            "player_rating": "‚úÖ Tested - Rating updates via draft endpoints, goalie-first sorting works",
            "team_crud": "‚úÖ Tested - Create, read, update, delete teams via admin endpoints",
            "team_captain": "‚úÖ Tested - Assign, change, clear captain via dropdown",
            "team_captain_validation": "‚úÖ Tested - Captain auto-clears when player removed from team",
            "team_player_assignment": "‚úÖ Tested - Assign, remove, drag-drop between teams",
            "draft_validation": "‚úÖ Tested - Players only on one team per session",
            "auto_draft_algorithm": "‚ùå Not Implemented"
          },
          "frontend_tests": {
            "draft_page": "‚úÖ Tested - Drag-and-drop works in all directions (pool‚Üîteams, team‚Üîteam)",
            "team_management": "‚úÖ Tested - Create, edit, delete teams with confirmation modals",
            "team_captain_selector": "‚úÖ Tested - Captain dropdown populates from registrations, updates correctly",
            "captain_badge_display": "‚úÖ Tested - Captain badge shows inline in team header with star icon",
            "player_assignment": "‚úÖ Tested - Drag players to teams, remove via X button or drag-to-pool",
            "auto_draft": "‚ùå Not Implemented",
            "user_view": "‚ùå Not Implemented - No user-facing team views",
            "goalie_priority": "‚úÖ Tested - Goalies appear first in draft pool",
            "admin_sessions_redesign": "‚úÖ Tested - New UI loads correctly, filters work, modals display properly",
            "session_visibility": "‚úÖ Tested - Sessions remain visible 7 days after start, 'Starting Soon' notification appears"
          },
          "integration_tests": {
            "complete_draft_flow": "‚úÖ Tested - Create teams ‚Üí Assign players ‚Üí Assign captains ‚Üí View in draft page",
            "captain_auto_clear": "‚úÖ Tested - Remove captain from team ‚Üí Captain set to null automatically",
            "user_sees_team_assignment": "‚ùå Not Tested - User views not implemented",
            "admin_edits_captain": "‚úÖ Tested - Captain changes via dropdown reflect immediately in draft page",
            "registration_data_loading": "‚úÖ Fixed - getSessionRegistrations now returns full object, modal displays all registrations"
          },
          "manual_testing_checklist": {
            "completed": [
              "‚úÖ Admin views draft page for session with registrations",
              "‚úÖ Draft pool displays players with position badges and goalie priority",
              "‚úÖ Admin creates multiple teams for a session",
              "‚úÖ Admin assigns team captain from dropdown (populated from registrations)",
              "‚úÖ Captain badge appears inline in team header with star icon",
              "‚úÖ Change team captain to different player",
              "‚úÖ Clear captain (set dropdown to 'Select Captain')",
              "‚úÖ Remove captain from team (verify captain cleared automatically)",
              "‚úÖ Drag players from draft pool to teams",
              "‚úÖ Drag players between teams",
              "‚úÖ Drag player back to draft pool (unassign)",
              "‚úÖ Remove player via X button (appears on hover)",
              "‚úÖ Delete team (players return to draft pool)",
              "‚úÖ Admin sessions page displays with modern UI",
              "‚úÖ Filter buttons have proper spacing (gap-2)",
              "‚úÖ View Registrations modal shows all registrations correctly",
              "‚úÖ Sessions remain visible after registration closes",
              "‚úÖ 'Starting Soon' notification appears when registration closed but session not started",
              "‚úÖ Sessions disappear 7 days after session start date",
              "‚úÖ Publish draft feature with toggle button on draft page",
              "‚úÖ User views their team assignment on player dashboard",
              "‚úÖ User who is captain sees captain badge indicator",
              "‚úÖ Team roster displayed via expandable inline view (not modal)",
              "‚úÖ Caret toggle for showing/hiding roster",
              "‚úÖ Roster data cached for performance",
              "‚úÖ Dashboard date/time removed from sessions display",
              "‚úÖ All integration tests passing (12/12)",
              "‚úÖ Bearer token authentication properly implemented",
              "‚úÖ Test helper preserves user roles across logins"
            ],
            "not_implemented": [
              "‚ùå Use auto-draft feature",
              "‚ùå Clear all assignments"
            ],
            "edge_cases_tested": [
              "‚úÖ Try to drag player already on team (prevented by API)",
              "‚úÖ Captain from different team (validation prevents via dropdown population)",
              "‚úÖ Mobile responsive: Layout stacks correctly on narrow screens",
              "‚úÖ Empty draft pool state displays correctly",
              "‚úÖ Team with no players shows empty state"
            ]
          }
          }
        }
      ]
    },
    "week_9": {
      "priority_order_actual": [
      "1. ‚úÖ Database migrations: Rating on SessionRegistrations, Player-SessionRegistration link, MaxPlayers on Teams",
      "2. ‚úÖ Backend models: Team with MaxPlayers, Player with SessionRegistrationId",
      "3. ‚úÖ Backend: Draft player endpoints (GetDraftPlayers, SetPlayerRating, AssignPlayerToTeam, RemovePlayerFromTeam, GetTeamPlayers)",
      "4. ‚úÖ Backend: Team CRUD endpoints with captain assignment and MaxPlayers validation",
      "5. ‚úÖ Frontend: Draft page UI with Angular CDK drag-and-drop",
      "6. ‚úÖ Frontend: Team cards with position badges and inline captain display",
      "7. ‚úÖ Frontend: Professional UI/UX redesign (dashboard layout, 800px cards, styling)",
      "8. ‚úÖ Frontend: Goalie-first sorting implementation",
      "9. ‚úÖ Frontend: Remove player buttons (hover-activated)",
      "10. ‚úÖ Frontend: Admin teams page with captain dropdown from registrations",
      "11. ‚úÖ Frontend: Player count display and MaxPlayers field",
      "12. ‚úÖ Frontend: Admin sessions page complete redesign",
      "13. ‚úÖ Frontend: Modal polish (icons, summary cards, table cards)",
      "14. ‚úÖ Backend: Session visibility logic update (7-day window after start)",
      "15. ‚úÖ Frontend: Session filtering and 'Starting Soon' notifications",
      "16. ‚úÖ Bug fixes: Registration data loading, TypeScript type errors, button spacing",
      "17. ‚úÖ Draft publish feature: DraftEnabled and DraftPublished fields with toggle UI",
      "18. ‚úÖ User-facing team views: Player dashboard with team card and expandable roster",
      "19. ‚úÖ Backend authentication fix: ConfigureApplicationCookie prevents unwanted redirects",
      "20. ‚úÖ Team captain support: CaptainUserId field, UpdateTeamModel enhancement, captain badge display",
      "21. ‚úÖ Navigation enhancements: My Teams link in menu and quick actions",
      "22. ‚úÖ Draft status column: Admin sessions table shows draft progress badges",
      "23. ‚úÖ Testing infrastructure: All 12 integration tests passing with Bearer token auth",
      "24. ‚úÖ Test helper refactored: Preserves user roles across multiple login calls",
      "25. ‚úÖ UI/UX improvements: Removed date/time from dashboard session displays",
      "26. ‚úÖ Roster view enhancement: Converted from modal to expandable inline view with caret toggle",
      "27. ‚úÖ Performance optimization: Team roster caching in Map for faster subsequent views",
      "28. ‚ùå Auto-draft algorithm (not implemented)"
    ],
    "estimated_completion": "End of Week 8 (late December 2025)",
    "actual_completion": "January 15, 2026 - All core features including draft publish, user team views, testing infrastructure, and UI enhancements completed",
    "notes": [
      "‚úÖ Rating field stored on SessionRegistrations (not ApplicationUser) for session-specific context",
      "‚úÖ Simplified database design - Players link directly to SessionRegistrations (no junction table)",
      "‚úÖ Team captain is cosmetic/honorary - grants no special permissions",
      "‚úÖ Captain assignment auto-clears when captain removed from team",
      "‚úÖ Only one captain per team (nullable - teams can have no captain)",
      "‚úÖ Captain dropdown populated from session registrations (fixed data loading bug)",
      "‚úÖ Professional UI/UX with dashboard layout and position badges",
      "‚úÖ Goalie-first sorting: Position 'G' or 'GOALIE' (case-insensitive) appears first",
      "‚úÖ Bidirectional drag-drop: pool‚Üîteams, team‚Üîteam using Angular CDK",
      "‚úÖ Remove buttons appear on hover as alternative to drag-to-pool",
      "‚úÖ Admin sessions page redesigned with modern card layout and polished modals",
      "‚úÖ Session visibility extended to 7 days after session start (not when registration closes)",
      "‚úÖ 'Starting Soon' notification displays when registration closed but session not started",
      "‚úÖ Draft publish feature: Admin can publish/unpublish drafts via toggle button on draft page",
      "‚úÖ Player dashboard: Users see current/past team assignments with team color and captain badge",
      "‚úÖ Team roster view: Expandable inline view with caret toggle replaces modal",
      "‚úÖ Roster caching: Team details stored in Map for improved performance",
      "‚úÖ Draft status badges: Admin sessions table displays Disabled/Not Started/In Progress/Completed",
      "‚úÖ Backend authentication: ConfigureApplicationCookie prevents 404 redirects to /Account/Login",
      "‚úÖ Bearer token authentication: Properly extracts token from login response and sets in Authorization header",
      "‚úÖ Test infrastructure: TestAuthHelper refactored to preserve user roles across multiple login calls",
      "‚úÖ Integration tests: All 12 tests passing with proper authentication flow",
      "‚úÖ Captain functionality: CaptainUserId field in Teams table, displayed in player dashboard",
      "‚úÖ Navigation: My Teams link added to main menu and dashboard quick actions",
      "‚úÖ Dashboard UI polish: Removed date/time displays from 'Happening Now' and 'Upcoming Sessions'",
      "‚úÖ Week 8 FULLY COMPLETE - All planned features implemented, tested, and polished",
      "‚ùå Auto-draft algorithm not implemented - manual draft via drag-and-drop only",
      "Consider adding draft history/audit log in future for transparency",
      "MaxPlayers field added as enhancement beyond original plan",
      "Delete team confirmation shows player count warning",
      "Rating not displayed in UI - used for backend sorting only to maintain privacy",
      "Expandable roster view provides better UX than modal - keeps context visible",
      "Single team expansion enforced for cleaner interface"
    ]
  },
  "week_9": {
    "status": "‚úÖ COMPLETE - January 22, 2026",
    "focus": "Player Rating & Admin User Management",
    "estimated_hours": "15-20 hours",
    "actual_hours": "18 hours",
    "completed_features": [
      "‚úÖ Draft Page Enhancement: Position Badge Logic - 'Forward/Defense' displays as 'B' (January 19, 2026)",
      "‚úÖ Draft Page Enhancement: Team Average Rating Toggle Button added (January 19, 2026)",
      "‚úÖ Draft Page Enhancement: Team Average Rating Calculation (excludes goalies) (January 19, 2026)",
      "‚úÖ Draft Page Enhancement: Visual Balance Indicators - Green/Yellow/Red borders based on session average (January 19, 2026)",
      "‚úÖ Database Migration: Games Table created and applied (January 19, 2026)",
      "‚úÖ Player Rating System: Admin can rate players 1-5 with decimal increments and add notes (January 20, 2026)",
      "‚úÖ Database Migration: AddRatingAndNotesToApplicationUser (January 20, 2026)",
      "‚úÖ Database Migration: AddLastLoginAt (January 20, 2026)",
      "‚úÖ Admin User Management: Full profile editing including email/name changes with duplicate checking (January 20, 2026)",
      "‚úÖ Admin User Management: League assignment via dropdown (January 20, 2026)",
      "‚úÖ User Management: Last Login column displays timestamp of user's last successful login (January 20, 2026)",
      "‚úÖ Profile Page: Admin-only fields for rating, notes, email, and name editing (January 20, 2026)",
      "‚úÖ Profile Page: Phone number formatting in view mode (January 20, 2026)",
      "‚úÖ Profile Page: Clickable email addresses (mailto links) for admins (January 20, 2026)",
      "‚úÖ UX: Clickable user rows in admin table navigate to profile page (January 20, 2026)",
      "‚úÖ UX: Back to User Management button on profile when viewing as admin (January 20, 2026)",
      "‚úÖ User Management: Search by name filter - case-insensitive first/last name search (January 21, 2026)",
      "‚úÖ User Management: Pagination - 25 users per page with Previous/Next navigation (January 21, 2026)",
      "‚úÖ User Management: Search pagination integration - auto-resets to page 1 on search (January 21, 2026)",
      "‚úÖ User Management: Removed redundant 'Back to Admin Dashboard' button (January 21, 2026)",
      "‚úÖ Draft Page: Player notes display with toggle button (plus/minus icon) inline with name (January 21, 2026)",
      "‚úÖ Backend API: GetDraftPlayers enhanced to include PlayerNotes field (January 21, 2026)",
      "‚úÖ Draft Page: Notes toggle works consistently in available pool and team rosters (January 21, 2026)",
      "‚úÖ UI/UX: Footer height reduction - reduced padding for more compact layout (January 22, 2026)",
      "‚úÖ Registrations Modal: Pagination - 25 registrations per page with Previous/Next navigation (January 22, 2026)",
      "‚úÖ Registrations Modal: Search by name filter - case-insensitive first/last name search (January 22, 2026)",
      "‚úÖ Registrations Modal: Search pagination integration - auto-resets to page 1 on search (January 22, 2026)"
    ],
    "deferred_to_week_11": [
      "üìÖ Database Migration: GameStats Table (player statistics per game)",
      "üìÖ Database Migration: GoalieStats Table (goalie statistics per game)",
      "üìÖ Backend API: League standings calculation endpoints",
      "üìÖ Frontend: League standings page with team rankings",
      "üìÖ Frontend: Admin game management interface (create games, enter scores/stats)"
    ],
    "features": [
      {
        "name": "Admin League Management (Full CRUD)",
        "description": "Allow admins to add, edit, and delete leagues through the UI",
        "estimated_hours": "3-4 hours",
        "tasks": [
          {
            "component": "Backend API",
            "items": [
              "Add POST /api/admin/leagues endpoint (create league)",
              "Add PUT /api/admin/leagues/{id} endpoint (update league)",
              "Add DELETE /api/admin/leagues/{id} endpoint (delete league)",
              "Validate league deletion - prevent if league has active sessions",
              "Add IsActive field to League model for soft delete option",
              "Add CreatedAt, LastModified timestamps to League model",
              "Migration: Add new fields to Leagues table"
            ]
          },
          {
            "component": "Frontend UI",
            "items": [
              "Create admin-leagues component (similar to admin-sessions)",
              "Add 'Manage Leagues' option to admin nav/dashboard",
              "League table with columns: Name, Description, Created, Active Status, Session Count, Actions",
              "Create/Edit modal with fields: Name (required), Description (optional), IsActive toggle",
              "Delete confirmation dialog with warning if league has sessions",
              "Filter leagues: All, Active, Inactive",
              "Display session count per league",
              "Success/error messages for CRUD operations"
            ]
          }
        ],
        "acceptance_criteria": [
          "Admin can create new league with name and description",
          "Admin can edit existing league details",
          "Admin can delete league (blocked if it has sessions)",
          "Admin can toggle league active/inactive status",
          "League changes reflect immediately in session dropdowns",
          "Proper validation messages for all operations",
          "Non-admin users cannot access league management endpoints"
        ]
      },
      {
        "name": "Editable User Profile with Phone Number",
        "description": "Allow users to view and edit their own profile information including phone number",
        "estimated_hours": "2-3 hours",
        "tasks": [
          {
            "component": "Backend API",
            "items": [
              "Add PhoneNumber field to ApplicationUser model (if not exists)",
              "Add PUT /api/users/profile endpoint (update user profile)",
              "Validation: Email format, phone format (optional), name required",
              "Prevent email changes if user has registrations (or require re-verification)",
              "Return updated user data after successful update",
              "Migration: Add PhoneNumber to Users table if needed"
            ]
          },
          {
            "component": "Frontend UI",
            "items": [
              "Update profile component to show editable form (not read-only)",
              "Add 'Edit' button to toggle between view and edit mode",
              "Form fields: First Name, Last Name, Email, Phone Number",
              "Phone number formatting: (555) 555-5555 display format",
              "Client-side validation: Required fields, email format, phone format",
              "Save/Cancel buttons in edit mode",
              "Success message after profile update",
              "Update navigation bar to reflect name changes immediately"
            ]
          }
        ],
        "acceptance_criteria": [
          "User can view their profile information",
          "User can edit their name and phone number",
          "Email field is read-only or shows warning about registration impact",
          "Phone number accepts various formats and displays consistently",
          "Profile updates are saved and reflected throughout the app",
          "Validation errors are displayed clearly",
          "User cannot update another user's profile"
        ]
      },
      {
        "name": "User Management - Clickable User Rows",
        "description": "Admin can click on any user row in User Management to view detailed user profile with admin-specific information",
        "estimated_hours": "3-4 hours",
        "tasks": [
          {
            "component": "Backend API",
            "items": [
              "Add GET /api/admin/users/{id} endpoint (get user details by ID)",
              "Return comprehensive user data: Basic profile, registration history, payment history, session attendance",
              "Include admin-only fields: Account status, created date, last login, total spent, registration count, admin notes",
              "Calculate user statistics: Total registrations, total amount paid, active sessions, completed sessions",
              "Include league membership history if applicable",
              "Add PUT /api/admin/users/{id}/notes endpoint (update admin notes for user)",
              "Add AdminNotes field to ApplicationUser model (NVARCHAR(MAX), nullable)",
              "Migration: Add AdminNotes column to AspNetUsers table",
              "Validate only admins can read/write AdminNotes"
            ]
          },
          {
            "component": "Frontend UI - User Management Table",
            "items": [
              "Make each user row clickable (cursor: pointer, hover effect)",
              "Add click handler to navigate to /admin/users/{id} route",
              "Add visual indication that rows are clickable (hover background color change)",
              "Maintain existing table functionality (sorting, filtering)"
            ]
          },
          {
            "component": "Frontend UI - User Profile Page (Admin View)",
            "items": [
              "Create admin-user-profile component with route /admin/users/{id}",
              "Display user basic information: Name, Email, Phone, Date of Birth, Address",
              "Display account details: Created Date (local timezone), Email Confirmed status, Account Active status",
              "Display league membership: Current league, league join date if applicable",
              "Display registration history table: Session Name, League, Registration Date, Amount Paid, Payment Status",
              "Display statistics cards: Total Registrations, Total Spent, Active Sessions, Completed Sessions",
              "Add Admin Notes section: Textarea for notes with Save/Cancel buttons",
              "Admin Notes: Display existing notes (read-only initially), 'Edit Notes' button to make editable",
              "Admin Notes: Save button calls PUT /api/admin/users/{id}/notes with note content",
              "Admin Notes: Show last updated timestamp if available (future enhancement)",
              "Admin Notes: Character limit indicator (e.g., 5000 characters max)",
              "Add 'Back to User Management' button/link",
              "Add admin actions section: 'Deactivate Account', 'Reset Password', 'Send Email' (optional for Week 9)",
              "Style consistently with other admin pages"
            ]
          }
        ],
        "acceptance_criteria": [
          "Admin can click any user row in User Management to view their profile",
          "User profile page displays all relevant user information",
          "Admin-specific information (account stats, registration history) is clearly visible",
          "Admin can view and edit notes for any user",
          "Admin notes are saved successfully and persist across sessions",
          "Admin notes are NOT visible to regular users viewing their own profile",
          "Notes section has clear visual distinction (e.g., card with border, different background color)",
          "Registration history shows all sessions user has registered for",
          "Navigation back to User Management works correctly",
          "Non-admin users cannot access /admin/users/{id} routes",
          "Non-admin users cannot read or modify admin notes via API",
          "Page loads quickly even for users with many registrations",
          "All dates display in user's local timezone",
          "Profile page is responsive on mobile devices"
        ]
      },
      {
        "name": "Home Page Redesign with Hero Section",
        "description": "Redesign home page with hero section featuring facility intro and photo, plus expanded service offerings",
        "estimated_hours": "4-5 hours",
        "tasks": [
          {
            "component": "Frontend UI - Hero Section",
            "items": [
              "Create hero section component with background image/photo",
              "Headline: Hockey rink name/tagline (configurable)",
              "Subheading: Brief intro about the facility (2-3 sentences)",
              "CTA buttons: 'View Leagues', 'Register Now', 'Learn More'",
              "Responsive design: Full-height on desktop, adjusted on mobile",
              "Add placeholder image or stock hockey rink photo",
              "Overlay gradient for text readability"
            ]
          },
          {
            "component": "Frontend UI - Service Categories",
            "items": [
              "Redesign home page content below hero section",
              "Create service category cards: Youth Hockey Leagues, Clinics, Training, Girls Figure Skating, Open Ice Time",
              "Each card shows: Icon, Title, Brief Description, 'Learn More' link",
              "Grid layout: 2 columns on mobile, 3-4 columns on desktop",
              "Add icons for each service category (Bootstrap Icons or Font Awesome)",
              "Brief descriptions for each service (placeholder text)"
            ]
          },
          {
            "component": "Content Updates",
            "items": [
              "Youth Hockey Leagues: 'Competitive leagues for ages 6-18...'",
              "Clinics: 'Specialized skill development programs...'",
              "Training: 'Personal and team training sessions...'",
              "Girls Figure Skating: 'Figure skating programs for all skill levels...'",
              "Open Ice Time: 'Public skating sessions and ice rental...'",
              "Move existing league browsing further down or integrate into categories",
              "Add 'About Us' section with facility details (optional)"
            ]
          }
        ],
        "acceptance_criteria": [
          "Hero section displays prominently with engaging photo and text",
          "Service categories are clearly presented with icons and descriptions",
          "CTA buttons navigate to appropriate pages",
          "Page is fully responsive on mobile, tablet, and desktop",
          "Content is well-organized and easy to scan",
          "Hero image loads quickly and looks professional",
          "Navigation flows logically from hero to services to existing content"
        ]
      },
      {
        "name": "Footer with Social Media Icons",
        "description": "Add footer component with social media links for Facebook, X (Twitter), and Instagram",
        "estimated_hours": "1-2 hours",
        "tasks": [
          {
            "component": "Frontend UI",
            "items": [
              "Create footer component (shared across all pages)",
              "Add social media icons: Facebook, X (Twitter), Instagram",
              "Use Bootstrap Icons or Font Awesome for social icons",
              "Icon links: Facebook (https://facebook.com/placeholder), X (https://x.com/placeholder), Instagram (https://instagram.com/placeholder)",
              "Footer sections: Social Media, Quick Links, Contact Info, Copyright",
              "Quick Links: Home, Leagues, About, Contact",
              "Contact Info: Address, Phone, Email (placeholder content)",
              "Copyright: '¬© 2025 Hockey Rink Name. All rights reserved.'",
              "Style: Dark background with light text, sticky to bottom",
              "Ensure footer is included in app.component.html or layout"
            ]
          }
        ],
        "acceptance_criteria": [
          "Footer appears on all pages",
          "Social media icons are clearly visible and styled",
          "Social media links open in new tab (target='_blank')",
          "Quick links navigate correctly",
          "Footer is responsive and looks good on all screen sizes",
          "Footer stays at bottom of page even with little content",
          "Icons have hover effects for better UX"
        ]
      },
      {
        "name": "Team Color Management Enhancement",
        "description": "Allow admins to manually enter custom team colors in addition to selecting from predefined colors",
        "estimated_hours": "2-3 hours",
        "tasks": [
          {
            "component": "Frontend UI - Admin Teams",
            "items": [
              "Update team creation/edit modal to support both dropdown and manual text input for team colors",
              "Add 'Custom Color' option to team color dropdown",
              "When 'Custom Color' is selected, show text input field for manual color entry",
              "Allow free-text entry for colors (e.g., 'Light Blue', 'Dark Green', 'Silver', 'Maroon')",
              "Display custom colors in the team table with same badge styling as predefined colors",
              "Validate color input: Max length 50 characters, required if 'Custom Color' selected",
              "Keep existing predefined color options: Blue, Red, Green, Yellow, Purple, Orange, Brass, Copper",
              "Show color preview badge in the modal when custom color is entered"
            ]
          },
          {
            "component": "Backend API",
            "items": [
              "Update Team model validation: TeamColor field accepts any string up to 50 characters",
              "No database migration needed - TeamColor already supports NVARCHAR(50)",
              "Ensure PUT /api/teams/{id} and POST /api/teams endpoints accept custom color values",
              "No need for predefined color enum - accept any color string value"
            ]
          }
        ],
        "acceptance_criteria": [
          "Admin can select from predefined color dropdown OR enter custom color name",
          "Custom color names are saved and displayed correctly in the team table",
          "Custom colors display with badge styling matching predefined colors",
          "Modal shows clear indication of which input method is active (dropdown vs custom)",
          "Validation prevents empty or excessively long color names",
          "Existing teams with predefined colors continue to work without changes",
          "UI is intuitive and doesn't confuse users with too many options",
          "Team color badge in table shows color name regardless of source (predefined or custom)"
        ]
      },
      {
        "name": "Database and Model Enhancements",
        "description": "Support expanded service offerings with new models/fields if needed",
        "estimated_hours": "2 hours (optional/future)",
        "tasks": [
          {
            "component": "Planning/Discussion",
            "items": [
              "Discuss whether to add ServiceType enum (HockeyLeague, Clinic, Training, FigureSkating, OpenIce)",
              "Decide if Sessions should have ServiceType field or if separate tables are needed",
              "Plan for future: Clinic schedules, training bookings, open ice time slots",
              "Consider adding Category or Tags to sessions for filtering",
              "Week 9 can focus on UI/UX, with backend expansion in Week 10+"
            ]
          }
        ],
        "acceptance_criteria": [
          "Design decisions documented for future implementation",
          "UI is flexible enough to accommodate new service types",
          "Existing session/league structure can be extended without major refactoring"
        ]
      }
    ],
    "priority_order": [
      "1. Migration: Add PhoneNumber to ApplicationUser if needed",
      "2. Backend: User profile update endpoint (PUT /api/users/profile)",
      "3. Frontend: Editable user profile form with phone number field",
      "4. Frontend: Footer component with social media icons and quick links",
      "5. Frontend: Home page hero section with image and intro text",
      "6. Frontend: Service category cards (Youth Hockey, Clinics, Training, Figure Skating, Open Ice)",
      "7. Content: Write placeholder descriptions for each service category",
      "8. Migration: Add IsActive, CreatedAt, LastModified to League model",
      "9. Backend: League CRUD endpoints (POST, PUT, DELETE /api/admin/leagues)",
      "10. Frontend: Admin league management component (table, modals, CRUD operations)",
      "11. Testing: Profile updates, league management, responsive layout",
      "12. Polish: Hero image optimization, footer styling, mobile responsiveness"
    ],
    "estimated_completion": "End of Week 9 (early January 2026)",
    "notes": [
      "Hero section image should be high-quality and optimized for web",
      "Social media links are placeholders - update with real URLs when available",
      "Service categories (Clinics, Training, etc.) are UI-only for now - backend expansion in future weeks",
      "Phone number field is optional - users not required to provide it",
      "Consider phone number formatting library (e.g., libphonenumber-js) for better validation",
      "League deletion should be soft delete (IsActive=false) to preserve historical data",
      "Ensure user profile updates don't break existing registrations",
      "Footer should be semantic HTML (<footer>) for accessibility",
      "Quick Links in footer should match main navigation",
      "Test hero section on various screen sizes and browsers"
    ]
  },
  "week_10": {
    "status": "ÔøΩ Planned",
    "focus": "Emergency Contact & Jersey Number Management",
    "estimated_hours": "12-15 hours",
    "priority": "Medium",
    "start_date": "After Week 9 completion",
    "features": [
      {
        "emergency_contact": {
          "status": "üìã Planned",
          "priority": "High",
          "description": "Add emergency contact information to user profiles",
          "database_changes": {
            "table": "ApplicationUser",
            "new_fields": [
              "EmergencyContactName (NVARCHAR(100), NOT NULL)",
              "EmergencyContactPhone (NVARCHAR(20), NOT NULL)"
            ],
            "migration": "AddEmergencyContactToApplicationUser"
          },
          "backend_api": {
            "register_endpoint": {
              "route": "POST /api/auth/register",
              "changes": "Add EmergencyContactName and EmergencyContactPhone as required fields",
              "validation": "Both fields required, phone format validation"
            },
            "profile_endpoint": {
              "route": "PUT /api/users/profile",
              "changes": "Allow editing emergency contact fields",
              "validation": "Required fields cannot be empty"
            }
          },
          "frontend_registration": {
            "location": "Registration page",
            "fields": [
              "Emergency Contact Name (text input, required)",
              "Emergency Contact Phone (text input, required, phone format)"
            ],
            "validation": "Form cannot submit without emergency contact",
            "help_text": "Who should we contact in case of emergency?"
          },
          "frontend_profile": {
            "location": "User profile page",
            "view_mode": "Display emergency contact name and phone",
            "edit_mode": "Editable fields with validation",
            "save_validation": "Required fields must be filled"
          }
        }
      },
      {
        "hockey_registration_number": {
          "status": "üìã Planned",
          "priority": "Medium",
          "description": "Add optional USA Hockey or AAU Hockey registration number to user profiles",
          "database_changes": {
            "table": "ApplicationUser",
            "new_fields": [
              "HockeyRegistrationNumber (NVARCHAR(50), NULLABLE)",
              "HockeyRegistrationType (NVARCHAR(20), NULLABLE) - Values: 'USA Hockey', 'AAU Hockey', or NULL"
            ],
            "migration": "AddHockeyRegistrationToApplicationUser"
          },
          "backend_api": {
            "profile_endpoint": {
              "route": "PUT /api/users/profile",
              "changes": "Allow editing HockeyRegistrationNumber and HockeyRegistrationType",
              "validation": "Optional fields - no validation required"
            }
          },
          "frontend_profile": {
            "location": "User profile page - Hockey Registration section",
            "fields": [
              "Registration Type dropdown: [None, USA Hockey, AAU Hockey]",
              "Registration Number (text input, enabled only if type selected)"
            ],
            "view_mode": "Display 'USA Hockey #: 123456' or 'AAU Hockey #: 789012' or 'Not Provided'",
            "edit_mode": "Editable dropdown and text input",
            "help_text": "Your USA Hockey or AAU Hockey registration number (updated annually)",
            "notes": "Optional field - can be left blank"
          },
          "future_enhancements": [
            "Admin page to view all users with registration numbers",
            "Filter by registration type (USA Hockey / AAU Hockey)",
            "Track expiration dates (annual renewal tracking)",
            "Bulk export capability for admin reports",
            "Reminder system for expired registrations"
          ]
        }
      },
      {
        "jersey_number_management": {
          "status": "üìã Planned",
          "priority": "High",
          "description": "Admin assigns jersey numbers per session; users view their jersey numbers",
          "database_changes": {
            "table": "Players",
            "new_fields": [
              "JerseyNumber (INT, NULLABLE)",
              "CHECK constraint: JerseyNumber BETWEEN 0 AND 99",
              "UNIQUE constraint: Per team (SessionId + TeamId + JerseyNumber)"
            ],
            "notes": [
              "Jersey numbers are session-specific",
              "Same player can have different numbers in different sessions",
              "Unique per team (two teams can both have a #10)"
            ]
          },
          "backend_api": {
            "endpoints": [
              {
                "route": "GET /api/admin/sessions",
                "description": "Get all sessions with optional active/inactive filter",
                "query_params": "?isActive=true|false (optional)",
                "response": "Sessions ordered by StartDate (active first), includes PlayerCount, TeamCount",
                "fields": "Id, Name, StartDate, EndDate, LeagueId, IsActive, PlayerCount, TeamCount"
              },
              {
                "route": "GET /api/admin/sessions/{sessionId}/players",
                "description": "Get all players for a session with team and jersey info",
                "response": "List of players ordered by Team, Position (Goalie first), LastName",
                "fields": "PlayerId, UserId, FirstName, LastName, TeamId, TeamName, Position, JerseyNumber, Rating"
              },
              {
                "route": "PUT /api/admin/players/{playerId}/jersey",
                "description": "Assign jersey number to a player",
                "body": "{ jerseyNumber: number }",
                "validation": [
                  "Must be 0-99",
                  "Must be unique within team",
                  "Player must be assigned to a team"
                ],
                "response": "Updated player object"
              },
              {
                "route": "PUT /api/admin/sessions/{sessionId}/jerseys",
                "description": "Batch update jersey numbers for multiple players",
                "body": "[{ playerId: number, jerseyNumber: number }]",
                "validation": "Same as single update",
                "response": "Success/error summary with affected player count"
              }
            ]
          },
          "frontend_admin_dashboard": {
            "enhancement": "Add 'Manage Jersey Numbers' quick action card",
            "icon": "bi-123 or bi-card-list",
            "route": "/admin/jersey-management",
            "description": "Quick access to jersey number assignment"
          },
          "frontend_jersey_management_page": {
            "component": "admin-jersey-management.component.ts",
            "route": "/admin/jersey-management",
            "features": {
              "header": {
                "title": "Jersey Number Management",
                "filter": "Toggle between Active Sessions and All Sessions",
                "display": "Session count"
              },
              "sessions_list": {
                "layout": "Card view (4 per row on desktop, responsive)",
                "card_content": [
                  "Session name",
                  "Start Date ‚Üí End Date",
                  "League name",
                  "Player count / Team count",
                  "Status badge: Active (green) or Inactive (gray)"
                ],
                "ordering": "Active sessions first, then by StartDate ascending",
                "interaction": "Click card to navigate to jersey assignment page"
              }
            }
          },
          "frontend_jersey_assignment_page": {
            "component": "admin-jersey-assignment.component.ts",
            "route": "/admin/jersey-management/sessions/{sessionId}",
            "features": {
              "breadcrumb": "Admin Dashboard ‚Üí Jersey Management ‚Üí [Session Name]",
              "header": "Session name, dates, league",
              "filter": "Optional: Filter by team dropdown",
              "table": {
                "columns": [
                  "Player Name (clickable link to profile)",
                  "Team (with color badge)",
                  "Position (G/F/D/B badge)",
                  "Jersey Number (editable input 0-99)",
                  "Actions (Save button per row)"
                ],
                "sorting": "Team ASC, Position (Goalie first), LastName ASC",
                "validation": [
                  "Real-time: Must be 0-99",
                  "Real-time: Unique per team",
                  "Red border if invalid or duplicate"
                ],
                "save_options": [
                  "Individual 'Save' button per row (disabled if no changes)",
                  "OR 'Save All' button at bottom (batch update)"
                ],
                "feedback": [
                  "Toast notification on success",
                  "Error message on failure",
                  "Confirmation: 'Jersey number updated successfully'"
                ]
              }
            }
          },
          "frontend_user_dashboard": {
            "location": "My Team card",
            "display": "Add jersey number badge next to player info",
            "example": "Your Team: Blue Demons | Position: G | Jersey: #29",
            "fallback": "Jersey: Not Assigned (if no number assigned yet)"
          },
          "frontend_my_teams_page": {
            "location": "Team roster table (when user clicks View Team)",
            "enhancement": "Add 'Jersey #' column after Position column",
            "display": "Jersey number or '‚Äî' if not assigned",
            "styling": "Bold or badge format, captain indicator (C) after name",
            "example_table": [
              "Player | Position | Jersey # | Rating",
              "John Smith (C) | G | 29 | 4.5",
              "Jane Doe | F | 10 | 3.8"
            ]
          }
        }
      },
      {
        "admin_user_detail_page": {
          "status": "üìã Planned",
          "priority": "Low",
          "description": "Detailed user profile view for admins",
          "features": [
            "Click user row in User Management to view detailed profile",
            "User statistics: registrations count, total payments, sessions attended",
            "Registration history table (sortable, filterable)",
            "Payment history table",
            "Admin notes section (separate from player notes)"
          ]
        }
      },
      {
        "team_color_management": {
          "status": "üìã Planned",
          "priority": "Low",
          "description": "Admin can customize team colors",
          "features": [
            "Color picker for team colors",
            "Predefined color palette (common hockey team colors)",
            "Custom hex code input",
            "Live preview on team cards"
          ]
        }
      },
      {
        "footer_home_page": {
          "status": "üìã Planned",
          "priority": "Low",
          "description": "Enhanced footer and home page",
          "features": [
            "Footer with contact info and social links",
            "Home page testimonials section",
            "Feature highlights section",
            "Professional landing page polish"
          ]
        }
      }
    ],
    "notes": [
      "Phone number field is already implemented and working",
      "Profile photo upload removed from scope",
      "Jersey number preference removed - admin assigns per session instead",
      "Jersey numbers are unique per team, not globally",
      "Jersey numbers range 0-99",
      "Jersey numbers stored on Players table (session-specific)",
      "Emergency contact required during initial registration only",
      "Emergency contact editable by user on profile page",
      "Hockey registration number (USA Hockey / AAU Hockey) is optional field",
      "Hockey registration numbers updated annually - future admin tracking planned"
    ]
  },
  "week_11": {
    "status": "üìã Planned - Deferred from Week 9",
    "focus": "League Standings & Statistics",
    "estimated_hours": "15-20 hours",
    "tasks": [
      {
        "jwt_authentication_migration": {
          "status": "üîÑ Planned",
          "priority": "High - Security & Technical Debt",
          "description": "Replace custom Base64 token authentication with industry-standard JWT (JSON Web Tokens)",
          "current_issues": [
            "Custom Base64 token is not cryptographically signed",
            "Cannot use [Authorize] attributes with current token system",
            "Manual token validation in every controller is error-prone",
            "No token refresh mechanism",
            "Tokens cannot be revoked before expiry"
          ],
          "backend_changes": {
            "packages": [
              "Install Microsoft.AspNetCore.Authentication.JwtBearer",
              "Install System.IdentityModel.Tokens.Jwt"
            ],
            "program_cs": [
              "Remove CookieAuthentication configuration",
              "Add JWT Bearer authentication with proper key signing",
              "Configure TokenValidationParameters (issuer, audience, signing key, lifetime)",
              "Set default authentication scheme to JwtBearerDefaults.AuthenticationScheme"
            ],
            "auth_controller": [
              "Replace Base64 token generation with JwtSecurityTokenHandler",
              "Add proper claims (userId, email, role, expiry)",
              "Sign tokens with symmetric or asymmetric key",
              "Add refresh token endpoint (POST /api/auth/refresh)",
              "Add token revocation/blacklist mechanism"
            ],
            "all_controllers": [
              "Remove manual IsAdminAsync() and GetUserIdFromTokenAsync() methods",
              "Replace manual checks with [Authorize] and [Authorize(Roles = \"Admin\")] attributes",
              "Access user info via HttpContext.User.Claims",
              "Remove duplicate authentication logic"
            ],
            "configuration": [
              "Add JWT settings to appsettings.json (SecretKey, Issuer, Audience, ExpireMinutes)",
              "Use Azure Key Vault or environment variables for production keys",
              "Set AccessToken expiry: 15-60 minutes",
              "Set RefreshToken expiry: 7-30 days"
            ]
          },
          "frontend_changes": {
            "auth_service": [
              "Keep existing token storage in localStorage (or move to httpOnly cookies if desired)",
              "Update login response handling to accept JWT format",
              "Add refresh token storage (localStorage or sessionStorage)",
              "Implement automatic token refresh before expiry",
              "Add token refresh interceptor for 401 responses"
            ],
            "http_interceptor": [
              "Continue sending Authorization: Bearer <JWT>",
              "Handle 401 responses by attempting token refresh",
              "Redirect to login only after refresh fails"
            ],
            "minimal_changes": [
              "Most frontend code remains unchanged",
              "Token is still stored and sent the same way",
              "Only AuthService token generation/refresh logic changes"
            ]
          },
          "security_improvements": [
            "‚úÖ Cryptographically signed tokens prevent tampering",
            "‚úÖ Standard JWT format enables third-party validation",
            "‚úÖ Token refresh reduces exposure window",
            "‚úÖ Can implement token blacklist for immediate revocation",
            "‚úÖ Roles and claims properly embedded in token",
            "‚úÖ [Authorize] attributes work correctly"
          ],
          "acceptance_criteria": [
            "Login returns proper JWT with signature",
            "All [Authorize] attributes work without manual token validation",
            "Token refresh mechanism implemented and tested",
            "Old Base64 tokens no longer accepted",
            "All existing API tests pass with JWT authentication",
            "Frontend can automatically refresh expired tokens",
            "Admin endpoints properly enforce role-based authorization"
          ],
          "testing": [
            "Test token expiry and refresh flow",
            "Test invalid/tampered token rejection",
            "Test role-based authorization ([Authorize(Roles = \"Admin\")])",
            "Test logout clears tokens",
            "Test concurrent requests with token refresh",
            "Load test with JWT validation performance"
          ]
        }
      },
      {
        "dotnet_10_upgrade": {
          "status": "üîÑ Planned",
          "priority": "Medium - Framework Modernization",
          "description": "Upgrade backend from .NET 9 to .NET 10",
          "prerequisites": [
            ".NET 10 SDK released and stable (expected Q4 2025)"
          ],
          "steps": [
            "Install .NET 10 SDK",
            "Update HockeyRinkAPI.csproj: <TargetFramework>net10.0</TargetFramework>",
            "Update NuGet packages to .NET 10 compatible versions",
            "Update Entity Framework Core to 10.x",
            "Update Microsoft.AspNetCore.* packages to 10.x",
            "Update Azure SDK packages if needed",
            "Review .NET 10 breaking changes and migration guide",
            "Test all API endpoints",
            "Run full test suite (xUnit)",
            "Update Azure deployment configuration for .NET 10 runtime"
          ],
          "potential_benefits": [
            "Performance improvements",
            "New C# language features",
            "Security patches",
            "Better async/await patterns",
            "Improved minimal APIs if applicable"
          ],
          "acceptance_criteria": [
            "All API endpoints function correctly on .NET 10",
            "All unit tests pass",
            "No performance regressions",
            "Azure deployment successful with .NET 10 runtime"
          ]
        }
      },
      {
        "angular_21_upgrade": {
          "status": "üîÑ Planned",
          "priority": "Medium - Framework Modernization",
          "description": "Upgrade frontend from Angular 20 to Angular 21",
          "prerequisites": [
            "Angular 21 released and stable (expected November 2025)"
          ],
          "steps": [
            "Run: ng update @angular/cli @angular/core",
            "Update Angular Material if used",
            "Update RxJS to compatible version",
            "Update TypeScript to required version",
            "Review Angular 21 breaking changes",
            "Test all components and routes",
            "Check for deprecated APIs",
            "Update build configuration if needed",
            "Test production build: ng build --configuration production",
            "Update Azure Static Web Apps deployment if needed"
          ],
          "potential_benefits": [
            "Performance improvements (faster change detection)",
            "New Angular signals features",
            "Better developer experience",
            "Security patches",
            "Improved tree-shaking"
          ],
          "acceptance_criteria": [
            "All pages render correctly",
            "All routes and navigation work",
            "Forms and validation function properly",
            "HTTP requests and authentication work",
            "Production build completes without errors",
            "No console errors or warnings",
            "Azure deployment successful"
          ]
        }
      },
      {
        "code_cleanup": {
          "status": "üîÑ Planned",
          "priority": "Low - Technical Debt",
          "description": "Clean up deprecated code and improve maintainability",
          "tasks": [
            "Remove unused cookie authentication configuration from Program.cs",
            "Consolidate authentication logic (no more duplicate IsAdminAsync methods)",
            "Remove TODO comments for JWT migration",
            "Update API documentation with JWT examples",
            "Add code comments for complex JWT logic",
            "Review and update .gitignore if needed",
            "Check for unused NuGet packages and npm packages",
            "Update README with new authentication flow"
          ]
        }
      }
    ],
    "priority_order": [
      "1. .NET 10 upgrade (if released)",
      "2. Angular 21 upgrade (if released)",
      "3. JWT authentication backend implementation",
      "4. JWT authentication frontend integration",
      "5. Token refresh mechanism",
      "6. Update all controllers to use [Authorize] attributes",
      "7. Remove manual authentication methods",
      "8. Testing (unit tests, integration tests, E2E)",
      "9. Code cleanup and documentation",
      "10. Deploy and monitor"
    ],
    "estimated_completion": "End of Week 10 (mid-late January 2026)",
    "dependencies": [
      ".NET 10 SDK release schedule",
      "Angular 21 release schedule",
      "Week 8 and Week 9 completion"
    ],
    "notes": [
      "JWT migration is the most critical task for security and maintainability",
      "Framework upgrades depend on stable releases - may need to postpone if not ready",
      "JWT secret key MUST be stored securely (Azure Key Vault in production)",
      "Consider using RS256 (asymmetric) instead of HS256 for better security",
      "Token refresh implementation should handle race conditions",
      "Add comprehensive logging for authentication failures",
      "Consider implementing token blacklist using Redis for logout functionality",
      "Test authentication flow thoroughly before removing old system",
      "Keep old token validation code in a separate branch temporarily for rollback",
      "Update API documentation (Swagger) to reflect JWT authentication",
      "Consider adding rate limiting to token refresh endpoint",
      "Monitor token generation and validation performance",
      "Document JWT claims structure for future developers",
      "Ensure backward compatibility during migration (support both tokens temporarily?)",
      "Plan a maintenance window for JWT migration if needed"
    ],
    "risks": [
      "JWT migration could break existing sessions - users need to re-login",
      ".NET 10 or Angular 21 may have breaking changes requiring code updates",
      "Token refresh race conditions could cause authentication issues",
      "Framework upgrades may introduce new bugs"
    ],
    "mitigation": [
      "Thoroughly test JWT implementation in development",
      "Deploy during low-traffic period",
      "Have rollback plan ready",
      "Monitor error logs closely after deployment",
      "Keep old authentication code in version control for quick rollback"
    ]
  },
  "repo": "https://github.com/Dean92/hockey-rink-website"
}
